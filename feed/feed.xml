<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
	<title>é•¿å®‰è·¯</title>
	<subtitle>Subtitle. Update me.</subtitle>
	
	<link href="https://skadai.github.io/feed/feed.xml" rel="self"/>
	<link href="https://skadai.github.io"/>
	<updated>2021-08-17T00:00:00-00:00</updated>
	<id>https://skadai.github.io</id>
	<author>
		<name>sk</name>
		<email></email>
	</author>
	
	<entry>
		<title>starter</title>
		<link href="https://skadai.github.io/posts/Starter/"/>
		<updated>2021-07-30T00:00:00-00:00</updated>
		<id>https://skadai.github.io/posts/Starter/</id>
		<content type="html">
		  &lt;p&gt;å®šé£æ³¢&lt;/p&gt;
&lt;p&gt;è‹è½¼&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¸‰æœˆä¸ƒæ—¥ï¼Œæ²™æ¹–é“ä¸­é‡é›¨ã€‚é›¨å…·å…ˆå»ï¼ŒåŒè¡Œçš†ç‹¼ç‹ˆï¼Œä½™ç‹¬ä¸è§‰ï¼Œå·²è€Œé‚æ™´ï¼Œæ•…ä½œæ­¤è¯ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è«å¬ç©¿æ—æ‰“å¶å£°ï¼Œä½•å¦¨åŸå•¸ä¸”å¾è¡Œã€‚&lt;/p&gt;
&lt;p&gt;ç«¹æ–èŠ’é‹è½»èƒœé©¬ï¼Œè°æ€•ï¼Ÿä¸€è“‘çƒŸé›¨ä»»å¹³ç”Ÿã€‚&lt;/p&gt;
&lt;p&gt;æ–™å³­æ˜¥é£å¹é…’é†’ï¼Œå¾®å†·ï¼Œå±±å¤´æ–œç…§å´ç›¸è¿ã€‚&lt;/p&gt;
&lt;p&gt;å›é¦–å‘æ¥è§ç‘Ÿå¤„ï¼Œå½’å»ï¼Œä¹Ÿæ— é£é›¨ä¹Ÿæ— æ™´&lt;/p&gt;

			
		</content>
	</entry>
	
	<entry>
		<title>å¦‚ä½•éƒ¨ç½²11tyåˆ°github page</title>
		<link href="https://skadai.github.io/posts/deploy_11ty_in_github-page/"/>
		<updated>2021-07-31T00:00:00-00:00</updated>
		<id>https://skadai.github.io/posts/deploy_11ty_in_github-page/</id>
		<content type="html">
		  &lt;h4 id=&quot;%E6%B5%81%E7%A8%8B&quot;&gt;æµç¨‹ &lt;a class=&quot;direct-link&quot; href=&quot;#%E6%B5%81%E7%A8%8B&quot;&gt;#&lt;/a&gt;&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;ä¸‹è½½11ty æ¨¡æ¿ &lt;a href=&quot;https://github.com/google/eleventy-high-performance-blog&quot;&gt;https://github.com/google/eleventy-high-performance-blog&lt;/a&gt;, æŒ‰ç…§æç¤ºæ„å»ºè‡ªå·±çš„æœ¬åœ°åšå®¢&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ–°å¢ .nojekyll æ–‡ä»¶, æ­¤æ–‡ä»¶ç”¨æ¥å‘ŠçŸ¥ github-page ä¸ä½¿ç”¨ jekyll ä»¥å…äº§ç”Ÿå†²çª&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ–°å¢ä½ è‡ªå·±çš„gitä»“åº“, å‘½åä¸º &amp;lt;username&amp;gt;.github.io&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åˆ©ç”¨ä¸‹é¢çš„å‘½ä»¤ç”Ÿæˆä¸€å¯¹ç§˜é’¥&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;    ssh-keygen -t rsa -b &lt;span class=&quot;token number&quot;&gt;4096&lt;/span&gt; -C &lt;span class=&quot;token string&quot;&gt;&quot;&lt;span class=&quot;token variable&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; config user.email&lt;span class=&quot;token variable&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&quot;&lt;/span&gt; -f gh-pages -N &lt;span class=&quot;token string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å…¬é’¥æ·»åŠ åˆ°åˆšåˆšçš„ä»“åº“ deploy key&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://cdn.glofission.xyz/img/58b01ba0e0ca16a8610e92c1d0d2b661-20210730142442-19f6c1.png&quot; alt=&quot;æ·»åŠ å…¬é’¥&quot;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç§é’¥æ·»åŠ åˆ°åˆšåˆšçš„ä»“åº“ secret&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://cdn.glofission.xyz/img/a99999f7a1731866c320691fcb87e148-20210730142605-2772eb.png&quot; alt=&quot;æ·»åŠ ç§é’¥&quot;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&quot;5&quot;&gt;
&lt;li&gt;åœ¨æœ¬åœ°é¡¹ç›®æ–°å¢ .github/workflow/build.yml æ–‡ä»¶, æ·»åŠ ä¸‹é¢çš„å†…å®¹, ä¸»è¦é€»è¾‘æ˜¯æ‰“åŒ…é™æ€æ–‡ä»¶, å¹¶è°ƒç”¨é¢„å®šä¹‰çš„github action æŠŠ&lt;br&gt;
ç¼–è¯‘å¥½çš„æ–‡ä»¶æäº¤åˆ°gitä»“åº“&lt;/li&gt;
&lt;/ol&gt;
&lt;pre class=&quot;language-yml&quot;&gt;&lt;code class=&quot;language-yml&quot;&gt;&lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Eleventy Build&lt;br&gt;&lt;br&gt;&lt;span class=&quot;token key atrule&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;br&gt;  &lt;span class=&quot;token key atrule&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;br&gt;    &lt;span class=&quot;token key atrule&quot;&gt;branches&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;br&gt;      &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; master&lt;br&gt;&lt;br&gt;&lt;span class=&quot;token key atrule&quot;&gt;jobs&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;br&gt;  &lt;span class=&quot;token key atrule&quot;&gt;deploy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;br&gt;    &lt;span class=&quot;token key atrule&quot;&gt;runs-on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; ubuntu&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;latest&lt;br&gt;    &lt;span class=&quot;token key atrule&quot;&gt;steps&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;br&gt;        &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;uses&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; actions/checkout@v2&lt;br&gt;&lt;br&gt;        &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Setup Node&lt;br&gt;          &lt;span class=&quot;token key atrule&quot;&gt;uses&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; actions/setup&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;node@v1&lt;br&gt;          &lt;span class=&quot;token key atrule&quot;&gt;with&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;br&gt;            &lt;span class=&quot;token key atrule&quot;&gt;node-version&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&#39;14.x&#39;&lt;/span&gt;&lt;br&gt;&lt;br&gt;        &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; npm ci&lt;br&gt;&lt;br&gt;        &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; npm run build&lt;br&gt;&lt;br&gt;        &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Deploy&lt;br&gt;          &lt;span class=&quot;token key atrule&quot;&gt;uses&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; peaceiris/actions&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;gh&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;pages@v3&lt;br&gt;          &lt;span class=&quot;token key atrule&quot;&gt;with&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;br&gt;            &lt;span class=&quot;token key atrule&quot;&gt;deploy_key&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; $&lt;br&gt;            &lt;span class=&quot;token key atrule&quot;&gt;publish_dir&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; ./_site&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¸Šé¢æ–‡ä»¶ä¸­ secrets.ACTIONS_DEPLOY_KEY æ­£å¥½å¯¹åº”äº†æ­¥éª¤4ä¸­é…ç½®å¥½çš„ç§é’¥, è¿™æ ·actionä¸­å¯ä»¥å‘ä»“åº“gh-pageåˆ†æ”¯æäº¤ç¼–è¯‘å¥½çš„æ–‡ä»¶&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol start=&quot;6&quot;&gt;
&lt;li&gt;æœ€åä¸€æ­¥, æŠŠgithub-pageçš„source è®¾ç½®ä¸ºgh-page, è¿™æ ·æ¯æ¬¡å¾€masteråˆ†æ”¯æäº¤å†…å®¹ä¹‹å, å°±å¯ä»¥è§¦å‘ action è‡ªåŠ¨ç¼–è¯‘æ–‡ä»¶pushåˆ°gh-pageåˆ†æ”¯, ä½ å¯ä»¥åœ¨è‡ªå·±çš„ &amp;lt;username&amp;gt;.github.io çœ‹åˆ°æœ€æ–°çš„åšå®¢äº†&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&quot;%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99&quot;&gt;å‚è€ƒèµ„æ–™ &lt;a class=&quot;direct-link&quot; href=&quot;#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99&quot;&gt;#&lt;/a&gt;&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.rockyourcode.com/how-to-deploy-eleventy-to-github-pages-with-github-actions/&quot;&gt;https://www.rockyourcode.com/how-to-deploy-eleventy-to-github-pages-with-github-actions/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.linkedin.com/pulse/eleventy-github-pages-lea-tortay/&quot;&gt;https://www.linkedin.com/pulse/eleventy-github-pages-lea-tortay/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;11tyåŸºæœ¬ç”¨æ³•
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.bilibili.com/video/BV1zw41197NL?from=search&amp;amp;seid=4624100872590089830&quot;&gt;https://www.bilibili.com/video/BV1zw41197NL?from=search&amp;amp;seid=4624100872590089830&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.11ty.dev/&quot;&gt;https://www.11ty.dev/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;

			
		</content>
	</entry>
	
	<entry>
		<title>è¯•ç”¨ RSSHub</title>
		<link href="https://skadai.github.io/posts/rsshub/"/>
		<updated>2021-08-07T00:00:00-00:00</updated>
		<id>https://skadai.github.io/posts/rsshub/</id>
		<content type="html">
		  &lt;h4 id=&quot;rss-%E6%98%AF%E4%BB%80%E4%B9%88&quot;&gt;RSS æ˜¯ä»€ä¹ˆ &lt;a class=&quot;direct-link&quot; href=&quot;#rss-%E6%98%AF%E4%BB%80%E4%B9%88&quot;&gt;#&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/RSS&quot;&gt;RSS&lt;/a&gt; çš„å…¨ç§°æ˜¯ RDF Site Summary æˆ–è€… Really Simple Syndication, &lt;s&gt;åˆ«é—®æˆ‘è‹±æ–‡å•¥æ„æ€æˆ‘ä¸è®¤è¯†&lt;/s&gt;&lt;br&gt;
å°±æ˜¯è®©ä¸åŒçš„ç½‘ç«™çš„æ•°æ®éƒ½å¯ä»¥ç”¨ç»Ÿä¸€çš„æ ¼å¼è¿›è¡Œå®šä¹‰å’Œä¼ è¾“ï¼Œè¿™æ ·æˆ‘ä»¬å¯æŒ‘é€‰è‡ªå·±æ„Ÿå…´è¶£çš„ç½‘ç«™è¿›è¡Œè®¢é˜…ï¼Œè·å–åˆ°æ–°çš„æ–‡ç« é›†ä¸­é˜…è¯»äº†ï¼Œè¿™å¯ä»¥è®©æˆ‘ä»¬é›†ä¸­é˜…è¯»æ„Ÿå…´è¶£çš„æ–‡ç« ä¹ƒè‡³è§‚çœ‹è§†é¢‘ï¼Œä¸ç”¨åœ¨ç½‘ç«™ä¸Šé¢æ™ƒæ¥æ™ƒå»æµªè´¹æ—¶é—´å•¦&lt;/p&gt;
&lt;h4 id=&quot;rss-%E9%98%85%E8%AF%BB%E5%99%A8&quot;&gt;RSS é˜…è¯»å™¨ &lt;a class=&quot;direct-link&quot; href=&quot;#rss-%E9%98%85%E8%AF%BB%E5%99%A8&quot;&gt;#&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;ä¸å°‘ç½‘ç«™éƒ½æä¾›äº†ä¸‹é¢è¿™ä¸ªæŒ‰é’®ï¼Œå…¶å®ä»£è¡¨çš„å°±æ˜¯rssçš„æ„æ€ï¼Œç‚¹å‡»æŒ‰é’®å¯ä»¥å¾—åˆ°ä¸€ä¸ªurlï¼Œè¿™ä¸ªurlæä¾›çš„å°±æ˜¯å’Œæ­£å¼ç½‘ç«™ä¸€ç›´ä½†æ˜¯æ ·å¼æœ‰åˆ«çš„è®¢é˜…å†…å®¹äº†ï¼Œé€šå¸¸ä¼šæ˜¯xmlæ ¼å¼çš„æ–‡æœ¬ï¼Œæ‰€ä»¥æ˜¯æ²¡åŠæ³•æ–¹ä¾¿ç›´æ¥çœ‹çš„ã€‚&lt;br&gt;
&lt;img src=&quot;http://cdn.glofission.xyz/img/1b1fe7c45939aff7450787a980c29691-20210807171958-32a5c6.png&quot; alt=&quot;rss icon&quot;&gt;&lt;/p&gt;
&lt;p&gt;æ­¤æ—¶å‘¢ï¼Œæˆ‘ä»¬éœ€è¦æœ‰ä¸€ä¸ªé˜…è¯»å™¨å¯ä»¥è§£æè¿™ä¹ˆå†…å®¹å¹¶æ¸²æŸ“æˆè‰¯å¥½çš„æ ¼å¼ï¼Œæ¯”å¦‚ mac ç”¨æˆ·å¯ä»¥é€‰æ‹© &lt;a href=&quot;https://reederapp.com/&quot;&gt;reeder&lt;/a&gt;ã€‚&lt;br&gt;
ä½¿ç”¨çš„æ–¹å¼ä¹Ÿæ˜¯å¾ˆç®€å•çš„ï¼Œç›´æ¥åœ¨reederä¸­åˆ›å»ºä¸€ä¸ªæœ¬åœ°rssè´¦æˆ·, ç„¶åæ·»åŠ è®¢é˜…æº&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://cdn.glofission.xyz/img/5587b52eff73570439b162d574847050-20210807173555-f52921.png&quot; alt=&quot;reederæ“ä½œ&quot;&gt;&lt;/p&gt;
&lt;p&gt;ç„¶åå°±å¯ä»¥çœ‹åˆ°ï¼Œæ·»åŠ æºçš„æ–‡ç« å·²ç»ä¸€ä¸ªä¸ªæ’å¥½ç­‰å¾…é˜…è¯»äº†ï¼Œreeder é˜…è¯»å™¨å·²ç»å¸®å¿™æ¸²æŸ“å¥½äº†ï¼Œå¯ä»¥çœ‹åˆ°æ’ç‰ˆè¿˜æ˜¯ä¸é”™çš„&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://cdn.glofission.xyz/img/5f62ce7eb780ed571010188fe8765b2d-20210807173835-088b0a.png&quot; alt=&quot;reeder article&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;rsshub&quot;&gt;RSSHub &lt;a class=&quot;direct-link&quot; href=&quot;#rsshub&quot;&gt;#&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;å®é™…ä¸Šï¼Œå¾ˆå¤šç½‘ç«™æ˜¯æ²¡æœ‰ä¸Šé¢é‚£ä¸ªé­”æ³•å›¾æ ‡çš„ï¼Œæ¯”å¦‚bç«™ï¼Œæˆ‘ä»¬æ¯æ¬¡å°±åªèƒ½è¿›å…¥ç½‘ç«™ï¼Œç‚¹å‡»å…³æ³¨çš„upåŠ¨æ€ï¼Œçœ‹æœ‰æ²¡æœ‰æŠ•ç¨¿ï¼Œç„¶åå†ç‚¹è¿›å»è§‚çœ‹äº†ä¹ˆï¼Ÿ&lt;/p&gt;
&lt;p&gt;å½“ç„¶æ˜¯æœ‰æ›´å¥½çš„åŠæ³•çš„ï¼Œ&lt;a href=&quot;https://github.com/DIYgod/RSSHub&quot;&gt;RSSHub&lt;/a&gt; å°±æ˜¯æ¥å¹²è¿™ä¸ªçš„&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;RSSHub æ˜¯ä¸€ä¸ªå¼€æºã€ç®€å•æ˜“ç”¨ã€æ˜“äºæ‰©å±•çš„ RSS ç”Ÿæˆå™¨ï¼Œå¯ä»¥ç»™ä»»ä½•å¥‡å¥‡æ€ªæ€ªçš„å†…å®¹ç”Ÿæˆ RSS è®¢é˜…æºã€‚RSSHub å€ŸåŠ©äºå¼€æºç¤¾åŒºçš„åŠ›é‡å¿«é€Ÿå‘å±•ä¸­ï¼Œç›®å‰å·²é€‚é…æ•°ç™¾å®¶ç½‘ç«™çš„ä¸Šåƒé¡¹å†…å®¹&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç¿»è¯‘ä¸€ä¸‹ï¼Œå°±æ˜¯ä¼šå†™ä»£ç çš„äººå·²ç»å¸®æŠŠä¸€äº›å¸¸ç”¨çš„ç½‘ç«™åšå¥½äº†æå–rssçš„æ–¹æ³•ï¼Œåªéœ€è¦æœ‰ä¸ªæœºå™¨èƒ½æ ¹æ®è¿™äº›æ–¹æ³•æŠŠç½‘ç«™æ•°æ®æ•´æˆæ ‡å‡† RSS çš„æ ¼å¼å¹¶æä¾› url é“¾æ¥ï¼Œç„¶åæˆ‘ä»¬å°±åƒä¸Šé¢é‚£æ ·ç”¨å°±å¥½äº†ã€‚ä¸‹é¢çš„å›¾ç‰‡å±•ç¤ºäº† RSSHub æ”¯æŒäº†å“ªäº›ç½‘ç«™ï¼Œè¿˜æ˜¯ç›¸å½“ä¸°å¯Œçš„&lt;/p&gt;
&lt;p&gt;RSSHub è‡ªå·±æ˜¯æä¾›äº†è¯•ç”¨ &lt;a href=&quot;https://rsshub.app/&quot;&gt;demo&lt;/a&gt; çš„ï¼Œåªéœ€è¦ç®€å•çš„æŒ‰ç…§ä¸åŒç½‘ç«™æŒ‡å®šçš„urlæ ¼å¼è‡ªå·±æ‹¼æ¥ï¼Œç„¶åç›´æ¥ç²˜è´´åˆ°é˜…è¯»å™¨é‡Œé¢å°±å®Œäº‹äº†ï¼&lt;/p&gt;
&lt;div style=&quot;display:flex;justify-content:space-between&quot;&gt;
&lt;img src=&quot;http://cdn.glofission.xyz/img/9d3beee4c6f6ef1f1228b0b706e80863-20210807175616-dc81cd.png&quot;&gt;
&lt;img src=&quot;http://cdn.glofission.xyz/img/179e3b153d7d76dc0497e6f7d4944a2a-20210807175551-b96172.png&quot;&gt;
&lt;/div&gt;
&lt;h4 id=&quot;rsshub-%E9%83%A8%E7%BD%B2&quot;&gt;RSSHub éƒ¨ç½² &lt;a class=&quot;direct-link&quot; href=&quot;#rsshub-%E9%83%A8%E7%BD%B2&quot;&gt;#&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;å®˜æ–¹è¯•ç”¨çš„demoæ¯•ç«Ÿå¤ªå¤šäººç”¨ï¼Œå¾ˆå®¹æ˜“é­åˆ°ç½‘ç«™çš„åçˆ¬é™åˆ¶ï¼Œè¿™ä¸ªæ—¶å€™ä½ å¯ä»¥é€‰æ‹©è‡ªå·±éƒ¨ç½²ä¸€ä¸ª RSSHub çš„æœåŠ¡, RSSHub çš„å®˜æ–¹æ–‡æ¡£é‡Œé¢ä¹Ÿæœ‰ &lt;a href=&quot;https://docs.rsshub.app/install/&quot;&gt;æ“ä½œè¯´æ˜&lt;/a&gt;, äº²æµ‹å¯ç”¨&lt;/p&gt;
&lt;p&gt;ä¸‹é¢ç®€å•æè¿°ä¸‹æµç¨‹ï¼Œé¦–å…ˆå¾—æœ‰ä¸€ä¸ªè‡ªå·±çš„æœåŠ¡å™¨ï¼Œæˆ‘ç”¨çš„æ˜¯ aliyun ECS(å•æ ¸ å†…å­˜2GiB, ç¡¬ç›˜40GB)&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;ssh ç™»å½•åˆ°æœåŠ¡å™¨&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ‹‰å– RSSHub çš„ Docker é•œåƒ, ä¸åŠ  tag çš„è¯ä¼šç›´æ¥ä¸‹è½½æœ€æ–°çš„&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;docker pull diygod/rsshub&lt;/code&gt;&lt;/pre&gt;
&lt;blockquote&gt;
&lt;p&gt;å¦‚æœæ²¡æœ‰ç”¨è¿‡ docker çš„è¯éœ€è¦è‡ªå·±å…ˆå®‰è£…ä¸€ä¸‹ï¼Œ å¯ä»¥å‚è€ƒ &lt;a href=&quot;https://www.runoob.com/docker/ubuntu-docker-install.html&quot;&gt;Ubuntu Dockerå®‰è£…&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol start=&quot;3&quot;&gt;
&lt;li&gt;å¯åŠ¨é•œåƒ&lt;/li&gt;
&lt;/ol&gt;
&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;docker run -d --name rsshub -p &lt;span class=&quot;token number&quot;&gt;1200&lt;/span&gt;:1200 diygod/rsshub&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ç¨å¾®è§£é‡Šä¸€ä¸‹ä¸Šé¢è¿™ä¸ªå‘½ä»¤&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;docker run&lt;/code&gt; å°±æ˜¯æŠŠé•œåƒå¯åŠ¨ä¸€ä¸ªå®¹å™¨è·‘èµ·æ¥ï¼Œ&lt;code&gt;--name&lt;/code&gt; ç»™å®¹å™¨å‘½åï¼Œ &lt;code&gt;-d&lt;/code&gt; æŒ‡å®šåå°è¿è¡Œ&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-p 1200:1200&lt;/code&gt; å¹¶è®©æœåŠ¡å™¨ä¸Šé¢çš„1200ç«¯å£å’Œå®¹å™¨å†…éƒ¨çš„1200å»ºç«‹æ˜ å°„ï¼Œè¿™æ ·åœ¨æœåŠ¡å™¨ä¸Šé¢è®¿é—® localhost:1200 å°±å¯ä»¥è®¿é—®åˆ°å®¹å™¨é‡Œé¢çš„æœåŠ¡äº†ï¼Œå®¹å™¨å†…éƒ¨çš„ç«¯å£1200æ˜¯å†™æ­»çš„ï¼Œä½†æ˜¯æœåŠ¡å™¨ä¸Šé¢çš„ç«¯å£æ˜¯å¯ä»¥ä¿®æ”¹çš„ï¼Œæ¯”å¦‚æ”¹æˆ8000ï¼ˆå¦‚æœæ²¡æœ‰å†²çªçš„è¯ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&quot;4&quot;&gt;
&lt;li&gt;æœåŠ¡å™¨å®‰å…¨ç»„åŠ ä¸Š1200ç«¯å£, æ“ä½œå¦‚ä¸‹&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¥½å§ï¼Œå…¶å®ä¸Šé¢ RSSHub æ–‡æ¡£é‡Œé¢éƒ½æœ‰....&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://cdn.glofission.xyz/img/a070687ca2ed0a117eac459bd2edfbfc-20210807181508-b0ee44.png&quot; alt=&quot;add rule&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gitee.com/skadai/bluebird/raw/master/5a4ca0d6c33d77ffef06e1cbe305daef-20210808092442-13a705.png&quot; alt=&quot;add rule2&quot;&gt;&lt;/p&gt;
&lt;ol start=&quot;5&quot;&gt;
&lt;li&gt;æŠŠå®‰å…¨ç»„åº”ç”¨åˆ°ECSä¸Šé¢&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&quot;http://cdn.glofission.xyz/img/c7c495b56bb08bcbbe1b7bc593012e6e-20210807182042-0a7e9a.png&quot; alt=&quot;apply rule&quot;&gt;&lt;/p&gt;
&lt;p&gt;ä¸Šé¢å›¾ç‰‡æ‰“ç çš„å°±æ˜¯æœåŠ¡å™¨çš„å…¬ç½‘ IPäº†ï¼Œç»è¿‡ä¸Šé¢ä¸€é€šæ“ä½œæˆ‘ä»¬åœ¨æµè§ˆå™¨è¾“å…¥ http://&amp;lt;å…¬ç½‘IP&amp;gt;:1200, çœ‹åˆ°å’Œä¸Šé¢ RSSHub demo ä¸€æ ·çš„é¡µé¢å°±ç®—éƒ¨ç½²æˆåŠŸäº†ï¼Œä¹‹åæˆ‘ä»¬å°±å¯ä»¥ç”¨ä¸“å±çš„RSS æå–æœåŠ¡æ¥ç”Ÿæˆè®¢é˜…æºäº†ğŸ™‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://cdn.glofission.xyz/img/20dd670b20cc76c57676829ac7ba0657-20210807182335-38e268.png&quot; alt=&quot;final page&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;æœ‰ä¸ª RSSHub + Reeder è¿™ä¸ªç»„åˆï¼Œå°±å¯ä»¥å¾ˆæ–¹ä¾¿æ·»åŠ è‡ªå·±æ„Ÿå…´è¶£çš„å†…å®¹äº†ï¼Œä¸ç”¨åœ¨æ¼«æ— ç›®çš„çš„çœ‹äº†ï¼Œå¤§å¤§çš„èŠ‚çœæ—¶é—´ï¼ˆ&lt;s&gt;maybeæ˜¯çœ‹äº†æ›´å¤šæœ‰çš„æ²¡çš„&lt;/s&gt;ï¼‰&lt;/p&gt;

			
		</content>
	</entry>
	
	<entry>
		<title>åˆ©ç”¨ flask_caching æ·»åŠ ç¼“å­˜</title>
		<link href="https://skadai.github.io/posts/flask_caching/"/>
		<updated>2021-08-15T00:00:00-00:00</updated>
		<id>https://skadai.github.io/posts/flask_caching/</id>
		<content type="html">
		  &lt;h4 id=&quot;%E8%83%8C%E6%99%AF&quot;&gt;èƒŒæ™¯ &lt;a class=&quot;direct-link&quot; href=&quot;#%E8%83%8C%E6%99%AF&quot;&gt;#&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;å·¥ä½œä¸­æ¥åˆ°åé¦ˆï¼Œæˆ‘è´Ÿè´£çš„æœåŠ¡åœ¨è·‘æ•°è¿‡ç¨‹ä¸­ç»å¸¸ä¼šé‡åˆ°ä¸€äº›ä¸šåŠ¡é€»è¾‘çš„å˜åŒ–è€Œé‡åˆ·æ•°æ®ï¼Œç›¸åŒçš„æ•°æ®è¦åå¤çš„è¯·æ±‚æœåŠ¡ï¼Œè€ŒæœåŠ¡ä¸­ç”¨åˆ°äº†æ·±åº¦å­¦ä¹ æ¨¡å‹ï¼Œæ¯”è¾ƒè€—æ—¶ï¼Œå› æ­¤å¸Œæœ›æ·»åŠ ç¼“å­˜&lt;/p&gt;
&lt;h4 id=&quot;%E9%9C%80%E6%B1%82&quot;&gt;éœ€æ±‚ &lt;a class=&quot;direct-link&quot; href=&quot;#%E9%9C%80%E6%B1%82&quot;&gt;#&lt;/a&gt;&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;ä¸ºæœåŠ¡æ·»åŠ ç¼“å­˜ï¼Œæ”¶åˆ°æœåŠ¡ä¹‹åï¼Œä¼˜å…ˆæŸ¥è¯¢ç¼“å­˜ï¼Œç¼“å­˜æ²¡æœ‰æ‰å»è°ƒç”¨æœåŠ¡&lt;/li&gt;
&lt;li&gt;å¦‚æœè¯·æ±‚è¿”å›çš„æ˜¯exception errorï¼Œ ä¸éœ€è¦ç¼“å­˜ï¼ˆæœ‰å¯èƒ½æ˜¯model æœåŠ¡ä¸ç¨³å®šé€ æˆçš„ï¼‰&lt;/li&gt;
&lt;li&gt;å¦‚æœè¯·æ±‚ä¸­æ˜ç¡®è¯´æ˜ä¸ç”¨ç¼“å­˜ï¼Œéœ€è¦è·³è¿‡&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&quot;%E6%8A%80%E6%9C%AF%E6%96%B9%E6%A1%88&quot;&gt;æŠ€æœ¯æ–¹æ¡ˆ &lt;a class=&quot;direct-link&quot; href=&quot;#%E6%8A%80%E6%9C%AF%E6%96%B9%E6%A1%88&quot;&gt;#&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;Flask_Caching åº“åŸºæœ¬å¯ä»¥æ»¡è¶³è¦æ±‚ ï¼ˆé€‰æ‹©ç¬¬ä¸‰æ–¹åº“å°½é‡é€‰æ‹©ä¸€ç›´æœ‰ç»´æŠ¤çš„ï¼Œæ¯”å¦‚è¿˜æœ‰ä¸€ä¸ªåº“ flask_cacheå·²ç»è¶…è¿‡ä¸€å¹´æ²¡æœ‰ commit äº†ï¼Œå°½é‡ä¸è¦é€‰ï¼‰&lt;/p&gt;
&lt;h4 id=&quot;%E5%85%B7%E4%BD%93%E5%AE%9E%E6%96%BD%E5%85%B3%E9%94%AE%E7%82%B9&quot;&gt;å…·ä½“å®æ–½å…³é”®ç‚¹ &lt;a class=&quot;direct-link&quot; href=&quot;#%E5%85%B7%E4%BD%93%E5%AE%9E%E6%96%BD%E5%85%B3%E9%94%AE%E7%82%B9&quot;&gt;#&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;é’ˆå¯¹éœ€æ±‚ï¼Œè¿›ä¸€æ­¥è€ƒè™‘å®ç°è¿‡ç¨‹ä¸­å¯èƒ½ä¼šé‡åˆ°çš„é—®é¢˜ï¼Œæœ‰æ—¶å€™æœªå¿…è€ƒè™‘çš„æ¸…æ¥šï¼Œå¯èƒ½éœ€è¦åœ¨å®æ–½çš„æ—¶å€™æ‰èƒ½å¤Ÿå‘ç°ï¼Œä½†æ˜¯è¿™ä¸€æ­¥æå‰è€ƒè™‘æ˜¯éœ€è¦åšçš„&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;ç”¨ä»€ä¹ˆä½œä¸ºç¼“å­˜çš„key?&lt;br&gt;
æœ¬æœåŠ¡çš„ apiè¯·æ±‚  æ˜¯jsonæ ¼å¼çš„POSTï¼Œ æˆ‘ä»¬éœ€è¦ç”¨è¯·æ±‚çš„å­—æ®µä½œä¸ºkey&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¼“å­˜è¿‡æœŸæ—¶é—´ï¼Ÿ&lt;br&gt;
ç¼“å­˜å¯ä»¥è®¾ç½®è‡ªåŠ¨å¤±æ•ˆæ—¶é—´ï¼Œå› ä¸º ETL ä¸€èˆ¬é‡åˆ·ä»»åŠ¡é—´éš”æ—¶é—´æ˜¯æ¯”è¾ƒçŸ­çš„ï¼Œé€šè¿‡é…ç½®å‚æ•° CACHE_DEFAULT_TIMEOUT åœ¨cacheåˆå§‹åŒ–çš„æ—¶å€™ä¼ å…¥å³å¯ï¼Œcacheåœ¨åˆ°æœŸä¹‹åä¼šè‡ªåŠ¨åˆ é™¤æ‰ï¼Œè¿™æ ·ä¸éœ€è¦ä¸ºæ¯ä¸ªå‡½æ•°å•ç‹¬æŒ‡å®šå¤±æ•ˆæ—¶é—´&lt;/p&gt;
&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;    &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; flask &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Flask&lt;br&gt;    &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; flask_caching &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Cache&lt;br&gt;    config &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;br&gt;        &lt;span class=&quot;token string&quot;&gt;&quot;DEBUG&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;          &lt;span class=&quot;token comment&quot;&gt;# some Flask specific configs&lt;/span&gt;&lt;br&gt;        &lt;span class=&quot;token string&quot;&gt;&quot;CACHE_TYPE&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;SimpleCache&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# Flask-Caching related configs&lt;/span&gt;&lt;br&gt;        &lt;span class=&quot;token string&quot;&gt;&quot;CACHE_DEFAULT_TIMEOUT&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;300&lt;/span&gt;&lt;br&gt;    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;br&gt;    app &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Flask&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;__name__&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;br&gt;    &lt;span class=&quot;token comment&quot;&gt;# tell Flask to use the above defined config&lt;/span&gt;&lt;br&gt;    app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;config&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;from_mapping&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;config&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;br&gt;    cache &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Cache&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;app&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¦‚ä½•å®ç°å½“æœåŠ¡æœ‰æ­£å¸¸ç»“æœçš„æ—¶å€™å°±ç¼“å­˜ï¼Œæ²¡æœ‰æ­£å¸¸ç»“æœçš„æ—¶å€™å°±ä¸ç¼“å­˜&lt;br&gt;
é€šè¿‡æŸ¥çœ‹ flask_cachingçš„æ–‡æ¡£å‘ç°,  è¿™ä¸ªåº“æ˜¯é€šè¿‡æ·»åŠ  caching.cached è£…é¥°å™¨æ¥å®ç°ç¼“å­˜çš„&lt;br&gt;
@app.route(&amp;quot;/&amp;quot;)&lt;br&gt;
@cache.cached(timeout=50)&lt;br&gt;
def index():&lt;br&gt;
return render_template(&#39;index.html&#39;)&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿›ä¸€æ­¥å»çœ‹ cache.cached æœ¬èº«çš„ä»£ç (çœç•¥æ— å…³çš„ä»£ç )&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å‡½æ•°æœ¬èº«è¿”å›çš„æ˜¯ä¸€ä¸ªè£…é¥°å™¨&lt;/li&gt;
&lt;li&gt;æœ‰ä¸‹é¢çš„å­—æ®µæ˜¯å’Œè¦ä¸è¦è®¾ç½®ç¼“å­˜ç›¸å…³çš„
&lt;ul&gt;
&lt;li&gt;response_filter:   å‘ç”Ÿåœ¨ä¸»é€»è¾‘è®¡ç®—ä¹‹åï¼Œå¯¹ç»“æœè¿›è¡Œè¿‡æ»¤ï¼Œæ¯”å¦‚æˆ‘ä»¬å¯ä»¥è®¾ç½®å¦‚æœç»“æœæ˜¯500é”™è¯¯å°±ä¸ç¼“å­˜äº†&lt;/li&gt;
&lt;li&gt;unless: å‘ç”Ÿåœ¨ä¸»é€»è¾‘è®¡ç®—ä¹‹å‰,  å¯ä»¥è®¾ç½®ä¸€ä¸ªç‰¹æ®Šæ¡ä»¶ï¼Œå¦‚æœæ»¡è¶³ï¼Œé‚£ä¹ˆä¸èµ°ç¼“å­˜ï¼ˆä¹Ÿä¸ä¼šä¿å­˜ç¼“å­˜äº†ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æˆ‘ä»¬å¸Œæœ›å‘ç”Ÿ 500é”™è¯¯ä¸éœ€è¦ç¼“å­˜ï¼Œé‚£ä¹ˆresponse_filterè¿™ä¸ªå‚æ•°æ¯”è¾ƒç¬¦åˆè¦æ±‚ï¼Œæ­¤å¤–è¿˜æœ‰ä¸€ä¸ªæ¯”è¾ƒéšè”½çš„åšæ³•ï¼Œå°±æ˜¯å¦‚æœè·¯ç”±å‡½æ•°æ‰§è¡Œçš„æ­»åæŠ›å‡ºäº†å¼‚å¸¸ï¼Œè¿™ä¸ªæ—¶å€™å¼‚å¸¸äº¤ç»™å•ç‹¬çš„error handler å¤„ç†ï¼Œå…¶å®ä¹Ÿæ˜¯ä¸ä¼šä¿å­˜ç¼“å­˜çš„&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Alternately, looking at the code for Flask-Cache it appears it&lt;br&gt;
does not handle errors thrown by the view&lt;br&gt;
. So you could   simply raise the error yourself and handle the exception with a separate handler:&lt;br&gt;
æ‘˜è‡ª stack overflow&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç”±äºå¼€å‘æ—¶å€™æ²¡æœ‰ä»”ç»†çœ‹æ–‡æ¡£ğŸ˜¢ï¼Œå…·ä½“å®ç°é‡‡ç”¨çš„æ˜¯â€œæ¯”è¾ƒéšè”½çš„åšæ³•â€ï¼Œ response_filter åº”è¯¥æ›´åŠ ç›´è§‚ã€‚&lt;/p&gt;
&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;br&gt;&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;cached&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;br&gt;    self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;br&gt;    timeout&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Optional&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;br&gt;    key_prefix&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;view/%s&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;br&gt;    unless&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Optional&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;Callable&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;br&gt;    forced_update&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Optional&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;Callable&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;br&gt;    response_filter&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Optional&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;Callable&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;br&gt;    query_string&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;bool&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;br&gt;    hash_method&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Callable &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; hashlib&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;md5&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;br&gt;    cache_none&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;bool&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;br&gt;    make_cache_key&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Optional&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;Callable&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;br&gt;    source_check&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Optional&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;bool&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; Callable&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;br&gt;    &lt;span class=&quot;token triple-quoted-string string&quot;&gt;&quot;&quot;&quot;Decorator. Use this to cache a function. By default the cache key&lt;br&gt;    is `view/request.path`. You are able to use this decorator with any&lt;br&gt;    function by changing the `key_prefix`. If the token `%s` is located&lt;br&gt;    within the `key_prefix` then it will replace that with `request.path`&lt;br&gt;    &lt;br&gt;    Example::&lt;br&gt;    &lt;br&gt;        # An example view function&lt;br&gt;        @cache.cached(timeout=50)&lt;br&gt;        def big_foo():&lt;br&gt;            return big_bar_calc()&lt;br&gt;    &lt;br&gt;        # An example misc function to cache.&lt;br&gt;        @cache.cached(key_prefix=&#39;MyCachedList&#39;)&lt;br&gt;        def get_list():&lt;br&gt;            return [random.randrange(0, 1) for i in range(50000)]&lt;br&gt;    &lt;br&gt;        my_list = get_list()&lt;br&gt;    &lt;br&gt;    .. note::&lt;br&gt;    &lt;br&gt;        You MUST have a request context to actually called any functions&lt;br&gt;        that are cached.&lt;br&gt;    &lt;br&gt;    .. versionadded:: 0.4&lt;br&gt;        The returned decorated function now has three function attributes&lt;br&gt;        assigned to it. These attributes are readable/writable.&lt;br&gt;    &lt;br&gt;            **uncached**&lt;br&gt;                The original undecorated function&lt;br&gt;    &lt;br&gt;            **cache_timeout**&lt;br&gt;                The cache timeout value for this function. For a&lt;br&gt;                custom value to take affect, this must be set before the&lt;br&gt;                function is called.&lt;br&gt;    &lt;br&gt;            **make_cache_key**&lt;br&gt;                A function used in generating the cache_key used.&lt;br&gt;    &lt;br&gt;                readable and writable&lt;br&gt;    &lt;br&gt;    :param timeout: Default None. If set to an integer, will cache for that&lt;br&gt;                    amount of time. Unit of time is in seconds.&lt;br&gt;    &lt;br&gt;    :param key_prefix: Default &#39;view/%(request.path)s&#39;. Beginning key to .&lt;br&gt;                    use for the cache key. `request.path` will be the&lt;br&gt;                    actual request path, or in cases where the&lt;br&gt;                    `make_cache_key`-function is called from other&lt;br&gt;                    views it will be the expected URL for the view&lt;br&gt;                    as generated by Flask&#39;s `url_for()`.&lt;br&gt;    &lt;br&gt;                    .. versionadded:: 0.3.4&lt;br&gt;                        Can optionally be a callable which takes&lt;br&gt;                        no arguments but returns a string that will&lt;br&gt;                        be used as the cache_key.&lt;br&gt;    &lt;br&gt;    :param unless: Default None. Cache will *always* execute the caching&lt;br&gt;                facilities unless this callable is true.&lt;br&gt;                This will bypass the caching entirely.&lt;br&gt;    &lt;br&gt;    :param forced_update: Default None. If this callable is true,&lt;br&gt;                        cache value will be updated regardless cache&lt;br&gt;                        is expired or not. Useful for background&lt;br&gt;                        renewal of cached functions.&lt;br&gt;    &lt;br&gt;    :param response_filter: Default None. If not None, the callable is&lt;br&gt;                            invoked after the cached funtion evaluation,&lt;br&gt;                            and is given one arguement, the response&lt;br&gt;                            content. If the callable returns False, the&lt;br&gt;                            content will not be cached. Useful to prevent&lt;br&gt;                            caching of code 500 responses.&lt;br&gt;    &lt;br&gt;    :param query_string: Default False. When True, the cache key&lt;br&gt;                        used will be the result of hashing the&lt;br&gt;                        ordered query string parameters. This&lt;br&gt;                        avoids creating different caches for&lt;br&gt;                        the same query just because the parameters&lt;br&gt;                        were passed in a different order. See&lt;br&gt;                        _make_cache_key_query_string() for more&lt;br&gt;                        details.&lt;br&gt;    &lt;br&gt;    :param hash_method: Default hashlib.md5. The hash method used to&lt;br&gt;                        generate the keys for cached results.&lt;br&gt;    :param cache_none: Default False. If set to True, add a key exists&lt;br&gt;                    check when cache.get returns None. This will likely&lt;br&gt;                    lead to wrongly returned None values in concurrent&lt;br&gt;                    situations and is not recommended to use.&lt;br&gt;    :param make_cache_key: Default None. If set to a callable object,&lt;br&gt;                    it will be called to generate the cache key&lt;br&gt;    &lt;br&gt;    :param source_check: Default None. If None will use the value set by&lt;br&gt;                        CACHE_SOURCE_CHECK.&lt;br&gt;                        If True, include the function&#39;s source code in the&lt;br&gt;                        hash to avoid using cached values when the source&lt;br&gt;                        code has changed and the input values remain the&lt;br&gt;                        same. This ensures that the cache_key will be&lt;br&gt;                        formed with the function&#39;s source code hash in&lt;br&gt;                        addition to other parameters that may be included&lt;br&gt;                        in the formation of the key.&lt;br&gt;    &lt;br&gt;    &quot;&quot;&quot;&lt;/span&gt;&lt;br&gt;    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;decorator&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;f&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;br&gt;        &lt;span class=&quot;token decorator annotation punctuation&quot;&gt;@functools&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;wraps&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;f&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;br&gt;        &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;decorated_function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;args&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;**&lt;/span&gt;kwargs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;br&gt;            &lt;span class=&quot;token comment&quot;&gt;#: Bypass the cache entirely.&lt;/span&gt;&lt;br&gt;            &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;_bypass_cache&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;unless&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; f&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;args&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;**&lt;/span&gt;kwargs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;br&gt;                &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; f&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;args&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;**&lt;/span&gt;kwargs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;br&gt;            &lt;span class=&quot;token keyword&quot;&gt;nonlocal&lt;/span&gt; source_check&lt;br&gt;            &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; source_check &lt;span class=&quot;token keyword&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;br&gt;                source_check &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;source_check&lt;br&gt;&lt;br&gt;            &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;br&gt;                &lt;span class=&quot;token comment&quot;&gt;# é¦–å…ˆè®¡ç®— cached_key &lt;/span&gt;&lt;br&gt;                &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; make_cache_key &lt;span class=&quot;token keyword&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;callable&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;make_cache_key&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;br&gt;                    cache_key &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; make_cache_key&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;args&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;**&lt;/span&gt;kwargs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;br&gt;                &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;br&gt;                    cache_key &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; _make_cache_key&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;br&gt;                        args&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; kwargs&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; use_request&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;br&gt;                    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;br&gt;                &lt;br&gt;                &lt;span class=&quot;token comment&quot;&gt;# æŸ¥è¯¢ç¼“å­˜&lt;/span&gt;&lt;br&gt;                &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;br&gt;                    &lt;span class=&quot;token builtin&quot;&gt;callable&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;forced_update&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;br&gt;                    &lt;span class=&quot;token keyword&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;br&gt;                        forced_update&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;args&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;**&lt;/span&gt;kwargs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;br&gt;                        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; wants_args&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;forced_update&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;br&gt;                        &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; forced_update&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;br&gt;                    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;br&gt;                    &lt;span class=&quot;token keyword&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;br&gt;                &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;br&gt;                    rv &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;&lt;br&gt;                    found &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;&lt;br&gt;                &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;br&gt;                    rv &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cache&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;cache_key&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;br&gt;                    found &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;br&gt;&lt;br&gt;                    &lt;span class=&quot;token comment&quot;&gt;# If the value returned by cache.get() is None, it&lt;/span&gt;&lt;br&gt;                    &lt;span class=&quot;token comment&quot;&gt;# might be because the key is not found in the cache&lt;/span&gt;&lt;br&gt;                    &lt;span class=&quot;token comment&quot;&gt;# or because the cached value is actually None&lt;/span&gt;&lt;br&gt;                    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; rv &lt;span class=&quot;token keyword&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;br&gt;                        &lt;span class=&quot;token comment&quot;&gt;# If we&#39;re sure we don&#39;t need to cache None values&lt;/span&gt;&lt;br&gt;                        &lt;span class=&quot;token comment&quot;&gt;# (cache_none=False), don&#39;t bother checking for&lt;/span&gt;&lt;br&gt;                        &lt;span class=&quot;token comment&quot;&gt;# key existence, as it can lead to false positives&lt;/span&gt;&lt;br&gt;                        &lt;span class=&quot;token comment&quot;&gt;# if a concurrent call already cached the&lt;/span&gt;&lt;br&gt;                        &lt;span class=&quot;token comment&quot;&gt;# key between steps. This would cause us to&lt;/span&gt;&lt;br&gt;                        &lt;span class=&quot;token comment&quot;&gt;# return None when we shouldn&#39;t&lt;/span&gt;&lt;br&gt;                        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;not&lt;/span&gt; cache_none&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;br&gt;                            found &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;&lt;br&gt;                        &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;br&gt;                            found &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cache&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;has&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;cache_key&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;br&gt;            &lt;span class=&quot;token keyword&quot;&gt;except&lt;/span&gt; Exception&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;br&gt;                &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;debug&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;br&gt;                    &lt;span class=&quot;token keyword&quot;&gt;raise&lt;/span&gt;&lt;br&gt;                logger&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;exception&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Exception possibly due to cache backend.&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;br&gt;                &lt;span class=&quot;token comment&quot;&gt;# å¦‚æœåœ¨æŸ¥è¯¢ç¼“å­˜çš„æ—¶å€™é‡åˆ°äº†é”™è¯¯ï¼Œå°±ä¼šè¿›å…¥æœ¬èº«çš„å‡½æ•°è®¡ç®—&lt;/span&gt;&lt;br&gt;                &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; f&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;args&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;**&lt;/span&gt;kwargs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;br&gt;                &lt;br&gt;            &lt;span class=&quot;token comment&quot;&gt;# å¦‚æœæ²¡æœ‰ç¼“å­˜ï¼Œæ‰§è¡Œæœ¬èº«å‡½æ•°&lt;/span&gt;&lt;br&gt;            &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;not&lt;/span&gt; found&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;br&gt;                &lt;span class=&quot;token comment&quot;&gt;# æ³¨æ„è¿™ä¸€è¡Œ, å¦‚æœåœ¨æ‰§è¡Œ f(*args, **kwargs)çš„æ—¶å€™æŠ¥é”™ï¼Œä¹Ÿä¸ä¼šå†æ‰§è¡Œä¸‹é¢çš„ç¯èŠ‚äº†&lt;/span&gt;&lt;br&gt;                rv &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; f&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;args&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;**&lt;/span&gt;kwargs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;br&gt;                &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; response_filter &lt;span class=&quot;token keyword&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;or&lt;/span&gt; response_filter&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rv&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;br&gt;                    &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;br&gt;                        self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cache&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;br&gt;                            cache_key&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;br&gt;                            rv&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;br&gt;                            timeout&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;decorated_function&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cache_timeout&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;br&gt;                        &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;br&gt;                    &lt;span class=&quot;token keyword&quot;&gt;except&lt;/span&gt; Exception&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;br&gt;                        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;debug&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;br&gt;                            &lt;span class=&quot;token keyword&quot;&gt;raise&lt;/span&gt;&lt;br&gt;                        logger&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;exception&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;br&gt;                            &lt;span class=&quot;token string&quot;&gt;&quot;Exception possibly due to cache backend.&quot;&lt;/span&gt;&lt;br&gt;                        &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;br&gt;            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; rv&lt;br&gt;&lt;br&gt;        &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;default_make_cache_key&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;args&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;**&lt;/span&gt;kwargs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;br&gt;            &lt;span class=&quot;token comment&quot;&gt;# Convert non-keyword arguments (which is the way&lt;/span&gt;&lt;br&gt;            &lt;span class=&quot;token comment&quot;&gt;# `make_cache_key` expects them) to keyword arguments&lt;/span&gt;&lt;br&gt;            &lt;span class=&quot;token comment&quot;&gt;# (the way `url_for` expects them)&lt;/span&gt;&lt;br&gt;            argspec_args &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; inspect&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;getfullargspec&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;f&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;args&lt;br&gt;&lt;br&gt;            &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; arg_name&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; arg &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;zip&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;argspec_args&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; args&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;br&gt;                kwargs&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;arg_name&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; arg&lt;br&gt;&lt;br&gt;            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; _make_cache_key&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;args&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; kwargs&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; use_request&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;br&gt;        &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;_make_cache_key_query_string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;br&gt;            &lt;span class=&quot;token keyword&quot;&gt;pass&lt;/span&gt;&lt;br&gt;&lt;br&gt;        &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;_make_cache_key&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;args&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; kwargs&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; use_request&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;br&gt;            &lt;span class=&quot;token keyword&quot;&gt;pass&lt;/span&gt;&lt;br&gt;&lt;br&gt;    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; decorator&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&quot;4&quot;&gt;
&lt;li&gt;å¦‚æœåœ¨è¯·æ±‚ä¸­æ˜¾å¼çš„å£°æ˜äº†ä¸ä½¿ç”¨ç¼“å­˜ï¼Œå¦‚ä½•è·³è¿‡ç¼“å­˜?&lt;br&gt;
æ ¹æ®ä¸Šé¢çš„åˆ†æï¼Œunless å‚æ•°å…¶å®æ˜¯å¯ä»¥å®Œç¾é€‚ç”¨çš„ï¼Œæˆ‘ä»¬ä¸ºè¯·æ±‚æ·»åŠ ä¸€ä¸ª bypass å‚æ•°ï¼Œé»˜è®¤æ˜¯falseï¼Œ è¡¨ç¤ºä¼˜å…ˆä½¿ç”¨ç¼“å­˜ï¼Œ å¦‚æœä¼ å…¥ true, å°±è·³è¿‡ç¼“å­˜ ï¼Œç„¶åç»™ cache.cached ä¼ å…¥ unless å‚æ•°ä¸ºå½“å‰è¯·æ±‚çš„bypasså‚æ•°å°±å¥½äº†&lt;/li&gt;
&lt;/ol&gt;
&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;is_bypass&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;br&gt;    payload &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;json&lt;br&gt;    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; payload&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&#39;bypass&#39;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;br&gt;    &lt;br&gt;&lt;br&gt;&lt;span class=&quot;token decorator annotation punctuation&quot;&gt;@app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;route&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/analysis&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; methods&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;POST&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;token decorator annotation punctuation&quot;&gt;@cache&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cached&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;key_prefix&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;cache_key&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; unless&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;is_bypass&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;analysis&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;br&gt;    &lt;span class=&quot;token comment&quot;&gt;# ä¸»è·¯ç”±å‡½æ•°è´Ÿè´£å¤„ç† api è°ƒç”¨&lt;/span&gt;&lt;br&gt;    &lt;span class=&quot;token keyword&quot;&gt;pass&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&quot;5&quot;&gt;
&lt;li&gt;å¦‚ä½•é™åˆ¶ç¼“å­˜çš„å ç”¨ç©ºé—´å¤§å°ï¼Ÿ&lt;br&gt;
flask_caching æ”¯æŒå¤šç§ç¼“å­˜çš„åç«¯ï¼Œå¯ä»¥æ˜¯å¯flask ç¨‹åºåŒä¸€ä¸ªè¿›ç¨‹é‡Œé¢çš„cacheï¼Œå¯ä»¥æ˜¯å•ç‹¬å­˜åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œå¯ä»¥æ˜¯redis, memcached æ•°æ®åº“ä½œä¸ºç¼“å­˜åç«¯ï¼Œç”šè‡³å¯ä»¥å•ç‹¬å®šä¹‰ä¸€ä¸ªä½ è‡ªå·±çš„ç¼“å­˜åç«¯ï¼Œåªè¦ç¬¦åˆflask_cachingæ‰€è¦æ±‚çš„çš„apiæ¥å£å°±å¯ä»¥ã€‚&lt;br&gt;
ç®€å•èµ·è§ï¼Œæˆ‘ä»¬ç”¨äº† redisä½œä¸ºç¼“å­˜åç«¯ï¼Œåˆ©ç”¨ k8s å¯åŠ¨redis containerçš„æ—¶å€™é™åˆ¶ä¸€ä¸‹ redis å ç”¨çš„æœ€å¤§å†…å­˜å°±å¥½äº†ï¼Œæ²¡æœ‰ç”¨ä»€ä¹ˆç¼“å­˜æ·˜æ±°ç®—æ³• (æ¯”å¦‚ LRU )&lt;/li&gt;
&lt;/ol&gt;
&lt;pre class=&quot;language-yaml&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;    &lt;span class=&quot;token comment&quot;&gt;# ....ä»¥ä¸Šçœç•¥....&lt;/span&gt;&lt;br&gt;    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; social&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;nlp&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;redis&lt;br&gt;    &lt;span class=&quot;token key atrule&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; redis&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;4.0.14&lt;br&gt;    &lt;span class=&quot;token key atrule&quot;&gt;ports&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;br&gt;        &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;containerPort&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;6379&lt;/span&gt;&lt;br&gt;    &lt;span class=&quot;token key atrule&quot;&gt;resources&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;br&gt;        &lt;span class=&quot;token key atrule&quot;&gt;requests&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;br&gt;        &lt;span class=&quot;token key atrule&quot;&gt;memory&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 256Mi&lt;br&gt;        &lt;span class=&quot;token key atrule&quot;&gt;limits&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;br&gt;        &lt;span class=&quot;token key atrule&quot;&gt;memory&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 1Gi&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&quot;%E6%B5%8B%E8%AF%95&quot;&gt;æµ‹è¯• &lt;a class=&quot;direct-link&quot; href=&quot;#%E6%B5%8B%E8%AF%95&quot;&gt;#&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;å¯¹ä¸‹é¢çš„å…³é”®ç‚¹è¿›è¡Œæµ‹è¯•ï¼Œä¿è¯æ”¹åŠ¨æ˜¯å¯ä»¥æ»¡è¶³éœ€æ±‚çš„&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æµ‹è¯• unless å‚æ•°æ˜¯å¤Ÿç”Ÿæ•ˆ (æ‰‹åŠ¨ä¿®æ”¹ä¼ å…¥çš„å‚æ•° bypass ä¸º trueï¼ŒæŸ¥çœ‹æ˜¯å¦æœ‰æ‰§è¡Œåˆ°è·¯ç”±å‡½æ•°å†…éƒ¨)&lt;/li&gt;
&lt;li&gt;æµ‹è¯• 500 é”™è¯¯æ˜¯ä¸æ˜¯ç¼“å­˜äº†ï¼ˆæŠŠmodel svcåœ°å€å¡«é”™æ„é€ ä¸€ä¸ªé”™è¯¯ï¼‰&lt;/li&gt;
&lt;li&gt;æµ‹è¯•ç¼“å­˜å¤±æ•ˆçš„æ—¶å€™èƒ½å¤Ÿæ­£å¸¸ä½¿ç”¨ ï¼ˆå…³æ‰redis æœåŠ¡ï¼‰&lt;/li&gt;
&lt;li&gt;æµ‹è¯•å¼€å…³ç¼“å­˜æ—¶wrkæ€§èƒ½åŒºåˆ«ï¼ˆ&amp;lt;200    =&amp;gt;    1000+ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;%E9%99%84%E5%BD%95&quot;&gt;é™„å½• &lt;a class=&quot;direct-link&quot; href=&quot;#%E9%99%84%E5%BD%95&quot;&gt;#&lt;/a&gt;&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;ç¼“å­˜çš„ç®€å•ä»‹ç»  &lt;a href=&quot;https://www.youtube.com/watch?v=U3RkDLtS7uY&quot;&gt;https://www.youtube.com/watch?v=U3RkDLtS7uY&lt;/a&gt; (å°åº¦å°å“¥é£šè‹±è¯­)&lt;/li&gt;
&lt;/ul&gt;

			
		</content>
	</entry>
	
	<entry>
		<title>Triplet Loss and Online Triplet Mining (ç¿»è¯‘)</title>
		<link href="https://skadai.github.io/posts/triplet_loss/"/>
		<updated>2021-08-17T00:00:00-00:00</updated>
		<id>https://skadai.github.io/posts/triplet_loss/</id>
		<content type="html">
		  &lt;blockquote&gt;
&lt;p&gt;å·¥ä½œä¸­ç¢°åˆ°ä¸€ä¸ªæ£˜æ‰‹çš„é—®é¢˜: å¦‚ä½•ä»æµ·é‡å•†å“ä¸­æ‰¾åˆ°æ ‡å‡†åº“ä¸­çš„é‚£ä¸€ä¸ªï¼Ÿ&lt;br&gt;
è‡ªå·±å°è¯•è¿‡é€šè¿‡çº¯æ–‡æœ¬ä¿¡æ¯ï¼ˆæ ‡é¢˜, å•†å“ç®€ä»‹, å›¾ç‰‡ocrè¯†åˆ«å‡ºæ–‡å­—ï¼‰æ•ˆæœä¸ä½³, å†³å®šæ¢ä¸€ä¸ªæ€è·¯çœ‹çœ‹å›¾åƒæ£€ç´¢èƒ½ä¸èƒ½æä¾›ä¸€äº›æœ‰ä»·å€¼çš„ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬ç³»åˆ—æ‰“ç®—ç»“åˆè¿™ä¸ªå…·ä½“çš„é—®é¢˜, ç³»ç»Ÿæ€»ç»“ä¸‹å›¾åƒæ£€ç´¢é¢†åŸŸçš„åŸºæœ¬æ¦‚å¿µ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;çœ‹åˆ°äº† omoindrotçš„ &lt;a href=&quot;https://omoindrot.github.io/triplet-loss&quot;&gt;åšå®¢æ–‡ç« &lt;/a&gt;å¯¹ç†è§£ triplet loss çš„åŸç†å’Œå®ç°éƒ½éå¸¸æœ‰å¸®åŠ©, ç‰¹æ­¤ç¿»è¯‘&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;triplet-loss-and-triplet-mining&quot;&gt;Triplet loss and triplet mining &lt;a class=&quot;direct-link&quot; href=&quot;#triplet-loss-and-triplet-mining&quot;&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;h3 id=&quot;%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%8D%E7%94%A8-softmax&quot;&gt;ä¸ºä»€ä¹ˆä¸ç”¨ softmax &lt;a class=&quot;direct-link&quot; href=&quot;#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%8D%E7%94%A8-softmax&quot;&gt;#&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;Triplet loss (ä¸‰å…ƒç»„æŸå¤±) æ˜¯è°·æ­Œåœ¨ç»å…¸è®ºæ–‡ &lt;a href=&quot;https://arxiv.org/abs/1503.03832&quot;&gt;FaceNet: A Unified Embedding for Face Recognition and Clustering&lt;/a&gt; ä¸­æå‡ºçš„ä¸€ç§ç”¨æ¥è®­ç»ƒäººè„¸ embedding è¡¨å¾çš„æŸå¤±å‡½æ•°ã€‚&lt;/p&gt;
&lt;p&gt;å’Œä¼ ç»Ÿçš„åˆ†ç±»é—®é¢˜(å›ºå®šç±»åˆ«æ•°ç›®, ä½¿ç”¨äº¤å‰ç†µæŸå¤±å‡½æ•°)ä¸åŒ, äººè„¸è¯†åˆ«, å•†å“æ£€ç´¢å¾€å¾€æ˜¯å¤§é‡çš„ä¸ç¡®å®šç±»åˆ«åŒ¹é…é—®é¢˜, è¿™ä¸ªæ—¶å€™æ›´å¥½çš„åšæ³•æ˜¯åˆ¤æ–­ä¸¤ä¸ªitemæ˜¯ä¸æ˜¯å±äºåŒä¸€ä¸ªç±»åˆ«ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‰å…ƒç»„æŸå¤±å°±æ˜¯ä¸ºäº†ä¸Šé¢çš„åº”ç”¨åœºæ™¯è€Œå‡ºç°çš„, è®­ç»ƒç›®æ ‡æ˜¯æ¥è‡ªåŒä¸€ä¸ªç±»åˆ«çš„æ ·æœ¬è·ç¦»è¦æ¯”æ¥è‡ªä¸åŒç±»åˆ«çš„æ ·æœ¬è·ç¦»è¦è¿‘, åŒä¸€ä¸ªåˆ—è¡¨æ ·æœ¬å½¢æˆä¸€ä¸ªç±»ç°‡, ä¸åŒçš„ç±»ç°‡ä¹‹é—´æœ€å¥½è·ç¦»è¶³å¤Ÿå¤§ã€‚&lt;/p&gt;
&lt;h3 id=&quot;%E6%8D%9F%E5%A4%B1%E5%AE%9A%E4%B9%89&quot;&gt;æŸå¤±å®šä¹‰ &lt;a class=&quot;direct-link&quot; href=&quot;#%E6%8D%9F%E5%A4%B1%E5%AE%9A%E4%B9%89&quot;&gt;#&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;https://omoindrot.github.io/assets/triplet_loss/triplet_loss.png&quot; alt=&quot;å¥¥å·´é©¬å’Œé©¬å…‹é¾™æŸå¤±&quot;&gt;&lt;/p&gt;
&lt;p&gt;ä¸‰å…ƒç»„æŸå¤±çš„ç›®æ ‡æ˜¯åœ¨ç‰¹å¾ç©ºé—´ä¸­æ»¡è¶³&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ç›¸åŒæ ‡ç­¾çš„æ ·æœ¬è·ç¦»æ¯”è¾ƒè¿‘&lt;/li&gt;
&lt;li&gt;ä¸åŒæ ‡ç­¾æ ·æœ¬è·ç¦»æ¯”è¾ƒè¿œ&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ç„¶é¹…, æˆ‘ä»¬ä¸å¸Œæœ›è®©æ¯ä¸ªæ ‡ç­¾çš„æ ·æœ¬è®­ç»ƒåˆ°ç‰¹åˆ«å°çš„ç©ºé—´å†…ï¼ˆè¿™å¥è¯åŸæ–‡ &lt;code&gt;we donâ€™t want to push the train embeddings of each label to collapse into very small clusters&lt;/code&gt; æ²¡æœ‰å¤ªç†è§£, ä½œè€…ä¸“é—¨è§£é‡Šäº†é™„åœ¨ä¸‹é¢ï¼‰&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;When I mentioned that I meant that if you want to do classification or any task based on the embeddings, you only need the intra-cluster distance to be smaller than the inter-cluster distance. If you have that, then two examples from the same class will always have their embeddings closer than two examples from different classes.&lt;br&gt;
Once this is done, you don&#39;t really need to push the clusters closer together. My intuition is that if you do so, it&#39;s a form of overfitting and you will lose in test accuracy.&lt;/p&gt;
&lt;p&gt;In SphereFace they do something similar to softmax. Softmax is also going to push the predictions as close to 0 or to 1 as possible, which is to me a form of overfitting.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å•°å—¦äº†åŠå¤©, æŸå¤±å…·ä½“æ˜¯è¿™æ ·è®¾è®¡çš„&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;anchor: é”šç‚¹æ ·æœ¬(query æ ·æœ¬)&lt;/li&gt;
&lt;li&gt;postive: æ­£æ ·æœ¬(å’Œé”šç‚¹æ ·æœ¬æ ‡ç­¾ä¸€æ ·)&lt;/li&gt;
&lt;li&gt;negative: è´Ÿæ ·æœ¬(å’Œé”šç‚¹æ ·æœ¬æ ‡ç­¾ä¸ä¸€æ ·)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;loss = max(d(a, p) - d(a, n) + margin, 0)&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;æŸå¤±æ˜¯é”šç‚¹å’Œæ­£æ ·æœ¬çš„è·ç¦»å‡å»è´Ÿæ ·æœ¬è·ç¦»åŠ ä¸Šmargin, ç¨å¾®è§£é‡Šä¸€ä¸‹&lt;br&gt;
è¯•æƒ³&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¦‚æœé”šç‚¹å’Œæ­£æ ·æœ¬è·ç¦»å¾ˆè¿‘, å’Œè´Ÿæ ·æœ¬è·ç¦»å¾ˆè¿œ, ä¹Ÿå°±æ˜¯è¾¾åˆ°æˆ‘ä»¬çš„ç†æƒ³embeddingæ¡ä»¶, æ­¤æ—¶lossä¸º0&lt;/li&gt;
&lt;li&gt;å¦‚æœé”šç‚¹å’Œæ­£æ ·æœ¬è·ç¦»æ¯”è¾ƒè¿‘, å’Œè´Ÿæ ·æœ¬è·ç¦»æ¯”è¾ƒè¿œ, ä½†æ˜¯ä¹Ÿæ²¡è¿œå¤šå°‘, æ­¤æ—¶å› ä¸ºæœ‰marginçš„å­˜åœ¨, è¿™ç§æƒ…å†µlossä¼šæ˜¯ä¸€ä¸ª 0-marginçš„å€¼&lt;/li&gt;
&lt;li&gt;é”šç‚¹å’Œæ­£æ ·æœ¬åè€Œæ¯”è¾ƒè¿œ, å’Œè´Ÿæ ·æœ¬æ¯”è¾ƒè¿‘, è¿™ä¸ªæ—¶å€™ loss ç›´æ¥å¤§äºmargin&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸Šé¢ä¸‰ç§æƒ…å†µåˆ†åˆ«å¯¹åº”æ¨¡å‹åŒºåˆ†çš„ç®€å•(easy negative), ä¸­ç­‰(semi-hard negative), å›°éš¾çš„(hard negative)æƒ…å†µ, å› æ­¤lossæ˜¯ä¸€ä¸ªæ¯”ä¸€ä¸ªå¤§çš„, ä¸‹é¢çš„å›¾æ¯”è¾ƒç”ŸåŠ¨&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://omoindrot.github.io/assets/triplet_loss/triplets.png&quot; alt=&quot;triplet illustration&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;%E4%B8%89%E5%85%83%E7%BB%84%E7%AD%9B%E9%80%89(-triplet-mining)&quot;&gt;ä¸‰å…ƒç»„ç­›é€‰( triplet mining) &lt;a class=&quot;direct-link&quot; href=&quot;#%E4%B8%89%E5%85%83%E7%BB%84%E7%AD%9B%E9%80%89(-triplet-mining)&quot;&gt;#&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;ä¸Šé¢å…³äºä¸‰å…ƒç»„æŸå¤±çš„å®šä¹‰æœ‰äº†, åªæ˜¯ä»åŸç†ä¸Šå¤§ä½“å®ç°äº†è®­ç»ƒç›®æ ‡, é‚£ä¹ˆå…·ä½“å®ç°ä¸Šé€‰æ‹©é‚£äº›æ ·æœ¬ä½œä¸ºä¸‰å…ƒç»„åšæ³•æ˜¯å¾ˆå¤šçš„, ä¸‰å…ƒç»„çš„ç­›é€‰ä¸»è¦åˆ†ä¸º offline and online ä¸¤ç±»&lt;/p&gt;
&lt;h4 id=&quot;offline-mining-(%E4%B8%8D%E5%A5%BD%E7%94%A8)&quot;&gt;offline mining (ä¸å¥½ç”¨) &lt;a class=&quot;direct-link&quot; href=&quot;#offline-mining-(%E4%B8%8D%E5%A5%BD%E7%94%A8)&quot;&gt;#&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;è®­ç»ƒæ¯ä¸ªepochä¹‹å‰, æŠŠè®­ç»ƒé›†å…¨éƒ¨embeddingç®—å‡ºæ¥, æ‰¾åˆ° semi-hard å’Œ hard è¿›è¡Œè®­ç»ƒ, è®¡ç®—é‡æ¯”è¾ƒå¤§&lt;/p&gt;
&lt;h4 id=&quot;online-mining-(%E5%A5%BD%E7%94%A8)&quot;&gt;online mining (å¥½ç”¨) &lt;a class=&quot;direct-link&quot; href=&quot;#online-mining-(%E5%A5%BD%E7%94%A8)&quot;&gt;#&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;åœ¨epochæ¯ä¸ªbatchè®­ç»ƒçš„æ—¶å€™, ç›´æ¥æ¥, ä¸éœ€è¦éå†å…¨éƒ¨çš„è®­ç»ƒé›†, å°±åœ¨ä¸€ä¸ªå°èŒƒå›´ä¸Šé¢è®¡ç®—embeddingå¹¶æ‰¾åˆ°ç¬¦åˆè¦æ±‚çš„&lt;/p&gt;
&lt;h3 id=&quot;%E5%9C%A8%E7%BA%BF%E7%AD%9B%E9%80%89%E7%AD%96%E7%95%A5&quot;&gt;åœ¨çº¿ç­›é€‰ç­–ç•¥ &lt;a class=&quot;direct-link&quot; href=&quot;#%E5%9C%A8%E7%BA%BF%E7%AD%9B%E9%80%89%E7%AD%96%E7%95%A5&quot;&gt;#&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;ç®€è€Œè¨€ä¹‹å°±æ˜¯ä»€ä¹ˆæ ·çš„ä¸‰å…ƒç»„éœ€è¦è¿›è¡Œè®­ç»ƒ, åœ¨è®ºæ–‡ &lt;a href=&quot;https://arxiv.org/abs/1703.07737&quot;&gt; In Defense of the Triplet Loss for Person Re-Identification.&lt;/a&gt; æœ‰è¯¦è¿°&lt;/p&gt;
&lt;p&gt;å‡è®¾æ¯ä¸ªbatch size ä¸º B = PK ,  å…¶ä¸­ Pè¡¨ç¤ºä¸åŒçš„æ ‡ç­¾, Kè¡¨ç¤ºæ¯ä¸ªæ ‡ç­¾æŒ‘é€‰çš„æ ·æœ¬æ•°ç›®, æˆ‘ä»¬åªéœ€è¦åœ¨è¿™ä¸ªå°èŒƒå›´å†…è¿›è¡ŒæŒ‘é€‰åˆé€‚çš„ä¸‰å…ƒç»„&lt;/p&gt;
&lt;h4 id=&quot;batch-all&quot;&gt;batch all &lt;a class=&quot;direct-link&quot; href=&quot;#batch-all&quot;&gt;#&lt;/a&gt;&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;é€‰æ‹©æ‰€æœ‰åˆæ³•çš„ä¸‰å…ƒç»„(æ­£æ ·æœ¬å’ŒanchoråŒæ ‡ç­¾, è´Ÿæ ·æœ¬å’Œanchoræ ‡ç­¾ä¸åŒ), åˆ¨é™¤æ‰easy negativeä¹‹åå–å¹³å‡loss&lt;/li&gt;
&lt;li&gt;æ€»å…±å¯èƒ½çš„ä¸‰å…ƒç»„æ•°ç›® PK(K-1)(PK-K), ä¾æ¬¡è¡¨ç¤º, anchorå¯èƒ½æ•°ç›®, postive å¯èƒ½æ•°ç›®, negative å¯èƒ½æ•°ç›®&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;batch-hard&quot;&gt;batch hard &lt;a class=&quot;direct-link&quot; href=&quot;#batch-hard&quot;&gt;#&lt;/a&gt;&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;æ¯ä¸€ä¸ªanchor, åœ¨å½“å‰ batchä¸­ é€‰æ‹©æœ€å›°éš¾çš„æ­£æ ·æœ¬(d(a,p) æœ€å¤§) å’Œæœ€å›°éš¾çš„è´Ÿæ ·æœ¬( d(a, n)æœ€å°)å½¢æˆä¸‰å…ƒç»„è¿›è¡Œè®­ç»ƒ&lt;/li&gt;
&lt;li&gt;æ€»å…±å¯èƒ½çš„ä¸‰å…ƒç»„å°±æ˜¯ PK, æ¯ä¸ªbatchå°±åªé€‰æ‹©æœ€å›°éš¾çš„è®­ç»ƒæ ·æœ¬è¿›è¡Œè®­ç»ƒï¼ˆè®ºæ–‡å£°ç§°è¿™æ ·æ¯” batch allè¡¨ç°å¥½, å¥½ä¸å¥½ä¸çŸ¥é“, ä½†æ˜¯è®­ç»ƒæ—¶é—´çŸ­æ˜¯çœŸçš„ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;%E5%90%8E%E7%BB%AD%E7%AB%A0%E8%8A%82(%E7%95%A5)&quot;&gt;åç»­ç« èŠ‚(ç•¥) &lt;a class=&quot;direct-link&quot; href=&quot;#%E5%90%8E%E7%BB%AD%E7%AB%A0%E8%8A%82(%E7%95%A5)&quot;&gt;#&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;ä¸‹é¢æ˜¯ä»£ç å®ç°å’Œç¤ºä¾‹é¡¹ç›®, ç›´æ¥çœ‹åŸåšå°±å¥½äº†ã€‚ å°¤å…¶æ˜¯ä½œè€…å…³äº batch hard strategy çš„å®ç°, å¯è°“æ˜¯èµå¿ƒæ‚¦ç›®, å€¼å¾—å¥½å¥½å­¦ä¹ &lt;/p&gt;
&lt;h4 id=&quot;%E6%84%9F%E6%83%B3&quot;&gt;æ„Ÿæƒ³ &lt;a class=&quot;direct-link&quot; href=&quot;#%E6%84%9F%E6%83%B3&quot;&gt;#&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;triplet loss çš„æ€æƒ³å’Œä¹‹å‰çœ‹è¿‡çš„ä¸€ä¸ª&lt;a href=&quot;https://github.com/wvangansbeke/Unsupervised-Classification&quot;&gt;æ–‡ç« &lt;/a&gt;æœ‰ä¸€äº›ç›¸ä¼¼, éƒ½æ˜¯å…³æ³¨æ ·æœ¬å†…éƒ¨ç›¸åŒæ ‡ç­¾å’Œä¸åŒæ ‡ç­¾çš„å·®å¼‚æ€§, åè€…è§£å†³çš„æ˜¯å›ºå®šæ ‡ç­¾æ•°ç›®çš„æ— ç›‘ç£åˆ†ç±»é—®é¢˜, ç›´æ¥ç”¨å›¾ç‰‡çš„å˜åŒ–è®¤ä¸ºæ˜¯ä¸€ä¸ªæ­£æ ·æœ¬æ¥åš, anchorå’Œæ­£æ ·æœ¬çš„è·ç¦»å°½å¯èƒ½å°, é…åˆ self-labelling (æŠŠç½®ä¿¡åº¦é«˜çš„ç›´æ¥å½“æˆæ ‡æ³¨æ•°æ®) è®©æ— ç›‘ç£åˆ†ç±»çš„å‡†ç¡®ç‡ç›´æ¥è¾¾åˆ°äº† 85% ä»¥ä¸Š&lt;/p&gt;
&lt;p&gt;å¯¹äºå•†å“åŒ¹é…é—®é¢˜, ä»ç±»é—´å·®å¼‚å’Œç±»å†…å…±æ€§å‡ºå‘, æœ‰æ²¡æœ‰å¯èƒ½æŒ–æ˜ä¸€äº›å¼±ç›‘ç£çš„è®­ç»ƒæ‰‹æ®µå‘¢ ?&lt;/p&gt;

			
		</content>
	</entry>
</feed>
