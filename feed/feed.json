{
  "version": "https://jsonfeed.org/version/1",
  "title": "é•¿å®‰è·¯",
  "home_page_url": "https://skadai.github.io",
  "feed_url": "https://skadai.github.io/feed/feed.json",
  "description": "sk blog",
  "author": {
    "name": "sk",
    "url": ""
  },
  "items": [{
      "id": "https://skadai.github.io/posts/dbscan_intro/",
      "url": "https://skadai.github.io/posts/dbscan_intro/",
      "title": "DBSCAN åŸç†ç¯‡",
      "content_html": "<p>æœ¬æ–‡æ˜¯<a href=\"https://medium.com/odessa-ml-club/a-journey-to-clustering-introduction-to-dbscan-e724fa899b6f\">meidum odessa-ml-clubåšå®¢</a>çš„é˜…è¯»æ•´ç†</p>\n<h2 id=\"dbscan-%E8%83%8C%E6%99%AF\">DBSCAN èƒŒæ™¯ <a class=\"direct-link\" href=\"#dbscan-%E8%83%8C%E6%99%AF\">#</a></h2>\n<p><strong>1996 å¹´,</strong> è®ºæ–‡ A Density-Based Algorithm for Discovering Clusters in Large Spatial Databases with Noise ä¸­æå‡ºæ¥è¯¥ç®—æ³•, æ–‡ç« åŸºäºä¸€ä¸ªæœ´ç´ çš„å‡è®¾: äººä»¬æ˜¯é€šè¿‡ç±»å†…å¯†åº¦æ¯”å…¶ä»–åŒºåŸŸè¦æ˜æ˜¾çš„é«˜è¯†åˆ«å‡ºæ¥ç±»ç°‡çš„, åä¹‹, å¦‚æœåªæ˜¯æœ‰ä¸€äº›å™ªéŸ³, åº”è¯¥æ˜¯æ‚ä¹±æ— ç« çš„, æ¯”ç±»ç°‡å†…éƒ¨çš„æ•°æ®ç‚¹å¯†åº¦è¦æ˜æ˜¾çš„å°ã€‚</p>\n<h3 id=\"%E6%95%B0%E6%8D%AE%E5%88%92%E5%88%86\">æ•°æ®åˆ’åˆ† <a class=\"direct-link\" href=\"#%E6%95%B0%E6%8D%AE%E5%88%92%E5%88%86\">#</a></h3>\n<p>DBSCAN å°†æ•°æ®åˆ†ä¸ºäº†ä¸‰ç±», å…·ä½“æ¥è¯´, æ˜¯é€šè¿‡ä¸¤ä¸ªå‚æ•°åˆ’åˆ†çš„,  é™„è¿‘[e]èŒƒå›´å†…å«æœ‰[u]èŠ‚ç‚¹</p>\n<ul>\n<li>core point(cluster center): é™„è¿‘è·ç¦»eèŒƒå›´å†…è‡³å°‘å«æœ‰uä¸ªèŠ‚ç‚¹</li>\n<li>border point(cluster margin): è‡ªå·±æœ¬èº«ä¸æ˜¯core pointä½†æ˜¯åœ¨å…¶ä»–core pointçš„èŒƒå›´ä¹‹å†…</li>\n<li>noise data: ä¸å±äºä¸Šé¢çš„ä¸¤ä¸ªèŒƒå›´</li>\n</ul>\n<p>å¯¹äºç›¸åŒçš„æ•°æ®é›†, ä¸åŒçš„å‚æ•°é€‰æ‹©å¾—åˆ°çš„æ•°æ®ç»“æœæ˜¯ä¸åŒçš„ã€‚</p>\n<h3 id=\"%E6%95%B0%E6%8D%AE%E9%97%B4%E5%85%B3%E7%B3%BB\">æ•°æ®é—´å…³ç³» <a class=\"direct-link\" href=\"#%E6%95%B0%E6%8D%AE%E9%97%B4%E5%85%B3%E7%B3%BB\">#</a></h3>\n<ol>\n<li>directly density-reachable ä¸¤ä¸ªèŠ‚ç‚¹å…¶ä¸­ä¸€ä¸ªæ˜¯core pointå¹¶ä¸”å¦å¤–ä¸€ä¸ªä½äºeèŒƒå›´</li>\n<li>density-reachable ä¸€ä¸ªèŠ‚ç‚¹é€šè¿‡å¤šå±‚ directly density-reachableå…³ç³»å¯ä»¥æ‰¾åˆ°å¦å¤–ä¸€ä¸ªèŠ‚ç‚¹</li>\n<li>å­˜åœ¨ä¸­é—´èŠ‚ç‚¹c, èŠ‚ç‚¹aå’Œbéƒ½æ»¡è¶³å’Œc density-reachable, é‚£ä¹ˆaå’Œbæ˜¯density connected</li>\n</ol>\n<p>ä¸Šé¢ä¸‰ä¸ªå…³ç³»æ˜¯é€æ¸å˜å¼±çš„, directly density-reachableæ›´æ˜¯å¼ºè°ƒäº† core pointçš„æ¦‚å¿µ, ä¸å…·æœ‰äº¤æ¢æ€§</p>\n<h3 id=\"cluster-%E5%AE%9A%E4%B9%89\">cluster å®šä¹‰ <a class=\"direct-link\" href=\"#cluster-%E5%AE%9A%E4%B9%89\">#</a></h3>\n<ul>\n<li>æ•°æ®èŠ‚ç‚¹çš„é›†åˆCä¸­, ä»»æ„ä¸¤ä¸ªéƒ½æ˜¯ density-connected</li>\n<li>ä»»ä½•ä¸€ä¸ªèŠ‚ç‚¹å±äºC, åˆ™è¿™ä¸ªèŠ‚ç‚¹æ‰€æœ‰ density-connectedçš„èŠ‚ç‚¹ä¹Ÿå±äºC</li>\n</ul>\n<p>ä»èŠ‚ç‚¹çš„å®šä¹‰å‡ºå‘å¯ä»¥å¾—åˆ°ä¸‹é¢çš„å®šç†çš„</p>\n<ol>\n<li>\n<p>å¯¹äºé›†åˆä¸­çš„ core pointæ¥è¯´, æ‰€æœ‰èŠ‚ç‚¹éƒ½æ˜¯ density-reachableçš„, é›†åˆå°±æ˜¯core pointçš„density-reachableçš„æ‰€æœ‰èŠ‚ç‚¹çš„æ€»å’Œ (æ‰€æœ‰çš„core pointå’Œmargin pointå¿…ç„¶å±äºæŸä¸ªé›†åˆ)</p>\n</li>\n<li>\n<p>å¦‚æœä¸¤ä¸ªé›†åˆå­˜åœ¨äº¤é›†, åˆ™äº¤é›†ä¸­çš„èŠ‚ç‚¹å…¨éƒ¨æ˜¯ border point</p>\n</li>\n</ol>\n<h3 id=\"%E7%AE%97%E6%B3%95%E8%BF%87%E7%A8%8B\">ç®—æ³•è¿‡ç¨‹ <a class=\"direct-link\" href=\"#%E7%AE%97%E6%B3%95%E8%BF%87%E7%A8%8B\">#</a></h3>\n<ol>\n<li>éå†é›†åˆä¸­çš„æ‰€æœ‰èŠ‚ç‚¹, ä¸ºæ¯ä¸ªèŠ‚ç‚¹è¿›è¡Œæ ‡è¯†</li>\n<li>å¦‚æœèŠ‚ç‚¹å·²ç»æ ‡è¯†, è·³è¿‡, å¦‚æœèŠ‚ç‚¹æ²¡æœ‰æ ‡, çœ‹æ˜¯ä¸æ˜¯ core point, æ˜¯çš„è¯æ­¥éª¤3, ä¸æ˜¯0</li>\n<li>clusteræ•°ç›®åŠ 1, æŠŠèŠ‚ç‚¹ density-reachableçš„æ‰€æœ‰èŠ‚ç‚¹éƒ½æ ‡ä¸Š</li>\n</ol>\n<blockquote>\n<p>åœ¨éå†èŠ‚ç‚¹çš„è¿‡ç¨‹ä¸­, ç”¨äº† R*-tree æ•°æ®ç»“æ„, æ˜¯çš„ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º O(nlgn)</p>\n</blockquote>\n<h3 id=\"%E5%8F%82%E6%95%B0%E4%BC%B0%E8%AE%A1%E9%97%AE%E9%A2%98\">å‚æ•°ä¼°è®¡é—®é¢˜ <a class=\"direct-link\" href=\"#%E5%8F%82%E6%95%B0%E4%BC%B0%E8%AE%A1%E9%97%AE%E9%A2%98\">#</a></h3>\n<p>ç®—æ³•è¾“å…¥çš„å‚æ•° e å’Œ u å¯¹äºèšç±»çš„ç»“æœæ˜¯æœ‰æ˜æ˜¾å½±å“çš„, è¿™ä¸¤ä¸ªå‚æ•°å¦‚ä½•å†³å®šå‘¢?<br>\nDBSCANçš„ä½œè€…åœ¨åŸæœ‰æ¨¡å‹çš„åŸºç¡€ä¸Šæå‡ºäº† GDBSCAN ï¼ˆå‚æ•°é€‰æ‹©éƒ½æ˜¯ç¨‹åºå¸®å¿™å®Œæˆäº†ï¼‰</p>\n<p>é€šè¿‡è®¡ç®—æ¯ä¸ªèŠ‚ç‚¹æœ€è¿‘<strong>ç¬¬kä¸ªç‚¹</strong>çš„è·ç¦», é™åºæ’åˆ—, å¯ä»¥å¾—åˆ° k-dist plotæ›²çº¿å¦‚ä¸‹, å¯¹äºå™ªå£°ç‚¹è·ç¦»æ˜¯æ¯”è¾ƒå¤§çš„, å¦‚æœèŠ‚ç‚¹åœ¨clusterä¸­è·ç¦»å°±æ¯”è¾ƒå°çš„, æ‰€ä»¥å¯ä»¥çœ‹å‡ºæ›²çº¿ä¼šé€æ¸å½’äºå¹³ç¼“</p>\n<p><img src=\"https://gitee.com/skadai/bluebird/raw/master/b454c66f637a28913fa5d2e13c15c6d6-20210819105939-5aedda.png\" alt=\"4-distance-plot\"></p>\n<p>ä½œè€…å»ºè®®é€‰æ‹© e å€¼åœ¨ k-dist-plot å¹³ç¼“åŒºé—´å’Œä¸‹é™åŒºé—´çš„äº¤ç•Œé™„è¿‘, å¯¹åº”çš„æ¨ªåæ ‡ p * 2 ä½œä¸ºuçš„å»ºè®®å–å€¼</p>\n<h3 id=\"dbscan%E7%9A%84%E9%97%AE%E9%A2%98\">DBSCANçš„é—®é¢˜ <a class=\"direct-link\" href=\"#dbscan%E7%9A%84%E9%97%AE%E9%A2%98\">#</a></h3>\n<h4 id=\"%E5%9D%87%E5%8C%80%E6%80%A7%E5%88%86%E5%B8%83%E9%97%AE%E9%A2%98\">å‡åŒ€æ€§åˆ†å¸ƒé—®é¢˜ <a class=\"direct-link\" href=\"#%E5%9D%87%E5%8C%80%E6%80%A7%E5%88%86%E5%B8%83%E9%97%AE%E9%A2%98\">#</a></h4>\n<p>å¦‚æœcluster å†…éƒ¨çš„èŠ‚ç‚¹åˆ†å¸ƒæ˜¯ä¸å‡åŒ€çš„, é‚£ä¹ˆèšç±»æ•ˆæœå°±æ²¡æœ‰é‚£ä¹ˆç†æƒ³äº†</p>\n<p><img src=\"https://gitee.com/skadai/bluebird/raw/master/fafb39c2340c9951a7d06a48728cc2c5-20210819110650-3f9454.png\" alt=\"problem\"></p>\n<p>å¯ä»¥é€šè¿‡äººå·¥é€‰æ‹©å‚æ•°æå‡ºæ¥æ¯”è¾ƒä¸é”™çš„çš„ç»“æœä½†æ˜¯è¿™æ ·å…¶å®å°±å±äºç»éªŒäº†, æ²¡åŠæ³•å¤åˆ¶</p>\n<p><img src=\"https://gitee.com/skadai/bluebird/raw/master/cd0453978e518201d78a5ee2579e08bc-20210819110705-bd1c89.png\" alt=\"tune\"></p>\n<h4 id=\"overlapping\">overlapping <a class=\"direct-link\" href=\"#overlapping\">#</a></h4>\n<p>å½“ä¸¤ä¸ªclusterä¹‹é—´å­˜åœ¨ä¸€äº›äº¤å‰åŒºåŸŸ, æœ‰å¯èƒ½ä¼šè¢«æŸ“æˆä¸€ä¸ªã€‚è¿™ä¸ªæ˜¯æ¯”è¾ƒéš¾ä»¥å¤„ç†çš„ï¼Œå¦‚æœæŠŠ e å¢å¤§, uå‡å°‘, ç›¸å½“äºå‰Šå¼±äº† cluster é™åˆ¶, å¯èƒ½cluseréƒ½è¢«è¿æˆä¸€å—, åä¹‹å¦‚æœeå‡å°‘, uå¢åŠ , åŠ å¼ºäº†cluster çš„é™åˆ¶, å¯èƒ½ä¼šå‡ºæ¥æ›´å¤šçš„åŒºåŸŸ</p>\n<p><img src=\"https://gitee.com/skadai/bluebird/raw/master/962a5c8e9ff0b602fae1bcf39d882085-20210819110721-59d7e4.png\" alt=\"problem\"></p>\n<h3 id=\"%E5%B0%8F%E7%BB%93\">å°ç»“ <a class=\"direct-link\" href=\"#%E5%B0%8F%E7%BB%93\">#</a></h3>\n<p>DBSCAN ç®—æ³•çš„ä¸»è¦åˆ©å¼Šæ˜¯</p>\n<h4 id=\"%E4%BC%98%E5%8A%BF\">ä¼˜åŠ¿ <a class=\"direct-link\" href=\"#%E4%BC%98%E5%8A%BF\">#</a></h4>\n<ol>\n<li>ä¸éœ€è¦æå‰ç»™å®šclusteræ•°ç›®</li>\n<li>å¯¹äºä¸€äº›ç¦»æ•£å¾ˆå¼ºçš„ç‚¹, å¾ˆå®¹æ˜“å¹²æ‰</li>\n<li>å–„äºå¤„ç†clusterå½¢çŠ¶ä¸è§„åˆ™, distanceå‡½æ•°é€‰æ‹©ä¸°å¯Œ</li>\n</ol>\n<h4 id=\"%E5%8A%A3%E5%8A%BF\">åŠ£åŠ¿ <a class=\"direct-link\" href=\"#%E5%8A%A3%E5%8A%BF\">#</a></h4>\n<ol>\n<li>è™½ç„¶æœ‰ç»éªŒå…¬å¼, å‚æ•°é€‰æ‹©åŒæ ·æ˜¯éœ€è¦å¾®è°ƒçš„</li>\n<li>é›†åˆå†…éƒ¨åˆ†å¸ƒä¸å‡åŒ€, å­˜åœ¨ overlapåŒºåŸŸçš„æ—¶å€™è¡¨ç°ä¸å¥½</li>\n</ol>\n<p>DBSCANä¸æ˜¯å®Œç¾çš„, ä½†æ˜¯å…¶æ€æƒ³æ¨åŠ¨äº†ä¸€ç³»åˆ—å¯†åº¦ç›¸å…³çš„èšç±»ç®—æ³•çš„æå‡º, ç›´åˆ°ç°åœ¨ä¹Ÿæ˜¯ç»å¸¸è¢«è®¨è®ºçš„, ç»å…¸åœ°ä½ä¸å¯æ’¼åŠ¨</p>\n<h2 id=\"%E5%8F%82%E8%80%83\">å‚è€ƒ <a class=\"direct-link\" href=\"#%E5%8F%82%E8%80%83\">#</a></h2>\n<ul>\n<li><a href=\"https://medium.com/odessa-ml-club/a-journey-to-clustering-introduction-to-dbscan-e724fa899b6f\">a journey to clustering algorithm</a></li>\n</ul>\n",
      "date_published": "2021-08-18T00:00:00-00:00"
    },{
      "id": "https://skadai.github.io/posts/triplet_loss/",
      "url": "https://skadai.github.io/posts/triplet_loss/",
      "title": "Triplet Loss and Online Triplet Mining (ç¿»è¯‘)",
      "content_html": "<blockquote>\n<p>å·¥ä½œä¸­ç¢°åˆ°ä¸€ä¸ªæ£˜æ‰‹çš„é—®é¢˜: å¦‚ä½•ä»æµ·é‡å•†å“ä¸­æ‰¾åˆ°æ ‡å‡†åº“ä¸­çš„é‚£ä¸€ä¸ªï¼Ÿ<br>\nè‡ªå·±å°è¯•è¿‡é€šè¿‡çº¯æ–‡æœ¬ä¿¡æ¯ï¼ˆæ ‡é¢˜, å•†å“ç®€ä»‹, å›¾ç‰‡ocrè¯†åˆ«å‡ºæ–‡å­—ï¼‰æ•ˆæœä¸ä½³, å†³å®šæ¢ä¸€ä¸ªæ€è·¯çœ‹çœ‹å›¾åƒæ£€ç´¢èƒ½ä¸èƒ½æä¾›ä¸€äº›æœ‰ä»·å€¼çš„ä¿¡æ¯ã€‚</p>\n<p>æœ¬ç³»åˆ—æ‰“ç®—ç»“åˆè¿™ä¸ªå…·ä½“çš„é—®é¢˜, ç³»ç»Ÿæ€»ç»“ä¸‹å›¾åƒæ£€ç´¢é¢†åŸŸçš„åŸºæœ¬æ¦‚å¿µ</p>\n</blockquote>\n<p><strong>çœ‹åˆ°äº† omoindrotçš„ <a href=\"https://omoindrot.github.io/triplet-loss\">åšå®¢æ–‡ç« </a>å¯¹ç†è§£ triplet loss çš„åŸç†å’Œå®ç°éƒ½éå¸¸æœ‰å¸®åŠ©, ç‰¹æ­¤ç¿»è¯‘</strong></p>\n<h2 id=\"triplet-loss-and-triplet-mining\">Triplet loss and triplet mining <a class=\"direct-link\" href=\"#triplet-loss-and-triplet-mining\">#</a></h2>\n<h3 id=\"%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%8D%E7%94%A8-softmax\">ä¸ºä»€ä¹ˆä¸ç”¨ softmax <a class=\"direct-link\" href=\"#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%8D%E7%94%A8-softmax\">#</a></h3>\n<p>Triplet loss (ä¸‰å…ƒç»„æŸå¤±) æ˜¯è°·æ­Œåœ¨ç»å…¸è®ºæ–‡ <a href=\"https://arxiv.org/abs/1503.03832\">FaceNet: A Unified Embedding for Face Recognition and Clustering</a> ä¸­æå‡ºçš„ä¸€ç§ç”¨æ¥è®­ç»ƒäººè„¸ embedding è¡¨å¾çš„æŸå¤±å‡½æ•°ã€‚</p>\n<p>å’Œä¼ ç»Ÿçš„åˆ†ç±»é—®é¢˜(å›ºå®šç±»åˆ«æ•°ç›®, ä½¿ç”¨äº¤å‰ç†µæŸå¤±å‡½æ•°)ä¸åŒ, äººè„¸è¯†åˆ«, å•†å“æ£€ç´¢å¾€å¾€æ˜¯å¤§é‡çš„ä¸ç¡®å®šç±»åˆ«åŒ¹é…é—®é¢˜, è¿™ä¸ªæ—¶å€™æ›´å¥½çš„åšæ³•æ˜¯åˆ¤æ–­ä¸¤ä¸ªitemæ˜¯ä¸æ˜¯å±äºåŒä¸€ä¸ªç±»åˆ«ã€‚</p>\n<p>ä¸‰å…ƒç»„æŸå¤±å°±æ˜¯ä¸ºäº†ä¸Šé¢çš„åº”ç”¨åœºæ™¯è€Œå‡ºç°çš„, è®­ç»ƒç›®æ ‡æ˜¯æ¥è‡ªåŒä¸€ä¸ªç±»åˆ«çš„æ ·æœ¬è·ç¦»è¦æ¯”æ¥è‡ªä¸åŒç±»åˆ«çš„æ ·æœ¬è·ç¦»è¦è¿‘, åŒä¸€ä¸ªåˆ—è¡¨æ ·æœ¬å½¢æˆä¸€ä¸ªç±»ç°‡, ä¸åŒçš„ç±»ç°‡ä¹‹é—´æœ€å¥½è·ç¦»è¶³å¤Ÿå¤§ã€‚</p>\n<h3 id=\"%E6%8D%9F%E5%A4%B1%E5%AE%9A%E4%B9%89\">æŸå¤±å®šä¹‰ <a class=\"direct-link\" href=\"#%E6%8D%9F%E5%A4%B1%E5%AE%9A%E4%B9%89\">#</a></h3>\n<p><img src=\"https://omoindrot.github.io/assets/triplet_loss/triplet_loss.png\" alt=\"å¥¥å·´é©¬å’Œé©¬å…‹é¾™æŸå¤±\"></p>\n<p>ä¸‰å…ƒç»„æŸå¤±çš„ç›®æ ‡æ˜¯åœ¨ç‰¹å¾ç©ºé—´ä¸­æ»¡è¶³</p>\n<ol>\n<li>ç›¸åŒæ ‡ç­¾çš„æ ·æœ¬è·ç¦»æ¯”è¾ƒè¿‘</li>\n<li>ä¸åŒæ ‡ç­¾æ ·æœ¬è·ç¦»æ¯”è¾ƒè¿œ</li>\n</ol>\n<p>ç„¶é¹…, æˆ‘ä»¬ä¸å¸Œæœ›è®©æ¯ä¸ªæ ‡ç­¾çš„æ ·æœ¬è®­ç»ƒåˆ°ç‰¹åˆ«å°çš„ç©ºé—´å†…ï¼ˆè¿™å¥è¯åŸæ–‡ <code>we donâ€™t want to push the train embeddings of each label to collapse into very small clusters</code> æ²¡æœ‰å¤ªç†è§£, ä½œè€…ä¸“é—¨è§£é‡Šäº†é™„åœ¨ä¸‹é¢ï¼‰</p>\n<blockquote>\n<p>When I mentioned that I meant that if you want to do classification or any task based on the embeddings, you only need the intra-cluster distance to be smaller than the inter-cluster distance. If you have that, then two examples from the same class will always have their embeddings closer than two examples from different classes.<br>\nOnce this is done, you don't really need to push the clusters closer together. My intuition is that if you do so, it's a form of overfitting and you will lose in test accuracy.</p>\n<p>In SphereFace they do something similar to softmax. Softmax is also going to push the predictions as close to 0 or to 1 as possible, which is to me a form of overfitting.</p>\n</blockquote>\n<p>å•°å—¦äº†åŠå¤©, æŸå¤±å…·ä½“æ˜¯è¿™æ ·è®¾è®¡çš„</p>\n<ul>\n<li>anchor: é”šç‚¹æ ·æœ¬(query æ ·æœ¬)</li>\n<li>postive: æ­£æ ·æœ¬(å’Œé”šç‚¹æ ·æœ¬æ ‡ç­¾ä¸€æ ·)</li>\n<li>negative: è´Ÿæ ·æœ¬(å’Œé”šç‚¹æ ·æœ¬æ ‡ç­¾ä¸ä¸€æ ·)</li>\n</ul>\n<p><code>loss = max(d(a, p) - d(a, n) + margin, 0)</code></p>\n<p>æŸå¤±æ˜¯é”šç‚¹å’Œæ­£æ ·æœ¬çš„è·ç¦»å‡å»è´Ÿæ ·æœ¬è·ç¦»åŠ ä¸Šmargin, ç¨å¾®è§£é‡Šä¸€ä¸‹<br>\nè¯•æƒ³</p>\n<ul>\n<li>å¦‚æœé”šç‚¹å’Œæ­£æ ·æœ¬è·ç¦»å¾ˆè¿‘, å’Œè´Ÿæ ·æœ¬è·ç¦»å¾ˆè¿œ, ä¹Ÿå°±æ˜¯è¾¾åˆ°æˆ‘ä»¬çš„ç†æƒ³embeddingæ¡ä»¶, æ­¤æ—¶lossä¸º0</li>\n<li>å¦‚æœé”šç‚¹å’Œæ­£æ ·æœ¬è·ç¦»æ¯”è¾ƒè¿‘, å’Œè´Ÿæ ·æœ¬è·ç¦»æ¯”è¾ƒè¿œ, ä½†æ˜¯ä¹Ÿæ²¡è¿œå¤šå°‘, æ­¤æ—¶å› ä¸ºæœ‰marginçš„å­˜åœ¨, è¿™ç§æƒ…å†µlossä¼šæ˜¯ä¸€ä¸ª 0-marginçš„å€¼</li>\n<li>é”šç‚¹å’Œæ­£æ ·æœ¬åè€Œæ¯”è¾ƒè¿œ, å’Œè´Ÿæ ·æœ¬æ¯”è¾ƒè¿‘, è¿™ä¸ªæ—¶å€™ loss ç›´æ¥å¤§äºmargin</li>\n</ul>\n<p>ä¸Šé¢ä¸‰ç§æƒ…å†µåˆ†åˆ«å¯¹åº”æ¨¡å‹åŒºåˆ†çš„ç®€å•(easy negative), ä¸­ç­‰(semi-hard negative), å›°éš¾çš„(hard negative)æƒ…å†µ, å› æ­¤lossæ˜¯ä¸€ä¸ªæ¯”ä¸€ä¸ªå¤§çš„, ä¸‹é¢çš„å›¾æ¯”è¾ƒç”ŸåŠ¨</p>\n<p><img src=\"https://omoindrot.github.io/assets/triplet_loss/triplets.png\" alt=\"triplet illustration\"></p>\n<h3 id=\"%E4%B8%89%E5%85%83%E7%BB%84%E7%AD%9B%E9%80%89(-triplet-mining)\">ä¸‰å…ƒç»„ç­›é€‰( triplet mining) <a class=\"direct-link\" href=\"#%E4%B8%89%E5%85%83%E7%BB%84%E7%AD%9B%E9%80%89(-triplet-mining)\">#</a></h3>\n<p>ä¸Šé¢å…³äºä¸‰å…ƒç»„æŸå¤±çš„å®šä¹‰æœ‰äº†, åªæ˜¯ä»åŸç†ä¸Šå¤§ä½“å®ç°äº†è®­ç»ƒç›®æ ‡, é‚£ä¹ˆå…·ä½“å®ç°ä¸Šé€‰æ‹©é‚£äº›æ ·æœ¬ä½œä¸ºä¸‰å…ƒç»„åšæ³•æ˜¯å¾ˆå¤šçš„, ä¸‰å…ƒç»„çš„ç­›é€‰ä¸»è¦åˆ†ä¸º offline and online ä¸¤ç±»</p>\n<h4 id=\"offline-mining-(%E4%B8%8D%E5%A5%BD%E7%94%A8)\">offline mining (ä¸å¥½ç”¨) <a class=\"direct-link\" href=\"#offline-mining-(%E4%B8%8D%E5%A5%BD%E7%94%A8)\">#</a></h4>\n<p>è®­ç»ƒæ¯ä¸ªepochä¹‹å‰, æŠŠè®­ç»ƒé›†å…¨éƒ¨embeddingç®—å‡ºæ¥, æ‰¾åˆ° semi-hard å’Œ hard è¿›è¡Œè®­ç»ƒ, è®¡ç®—é‡æ¯”è¾ƒå¤§</p>\n<h4 id=\"online-mining-(%E5%A5%BD%E7%94%A8)\">online mining (å¥½ç”¨) <a class=\"direct-link\" href=\"#online-mining-(%E5%A5%BD%E7%94%A8)\">#</a></h4>\n<p>åœ¨epochæ¯ä¸ªbatchè®­ç»ƒçš„æ—¶å€™, ç›´æ¥æ¥, ä¸éœ€è¦éå†å…¨éƒ¨çš„è®­ç»ƒé›†, å°±åœ¨ä¸€ä¸ªå°èŒƒå›´ä¸Šé¢è®¡ç®—embeddingå¹¶æ‰¾åˆ°ç¬¦åˆè¦æ±‚çš„</p>\n<h3 id=\"%E5%9C%A8%E7%BA%BF%E7%AD%9B%E9%80%89%E7%AD%96%E7%95%A5\">åœ¨çº¿ç­›é€‰ç­–ç•¥ <a class=\"direct-link\" href=\"#%E5%9C%A8%E7%BA%BF%E7%AD%9B%E9%80%89%E7%AD%96%E7%95%A5\">#</a></h3>\n<p>ç®€è€Œè¨€ä¹‹å°±æ˜¯ä»€ä¹ˆæ ·çš„ä¸‰å…ƒç»„éœ€è¦è¿›è¡Œè®­ç»ƒ, åœ¨è®ºæ–‡ <a href=\"https://arxiv.org/abs/1703.07737\"> In Defense of the Triplet Loss for Person Re-Identification.</a> æœ‰è¯¦è¿°</p>\n<p>å‡è®¾æ¯ä¸ªbatch size ä¸º B = PK ,  å…¶ä¸­ Pè¡¨ç¤ºä¸åŒçš„æ ‡ç­¾, Kè¡¨ç¤ºæ¯ä¸ªæ ‡ç­¾æŒ‘é€‰çš„æ ·æœ¬æ•°ç›®, æˆ‘ä»¬åªéœ€è¦åœ¨è¿™ä¸ªå°èŒƒå›´å†…è¿›è¡ŒæŒ‘é€‰åˆé€‚çš„ä¸‰å…ƒç»„</p>\n<h4 id=\"batch-all\">batch all <a class=\"direct-link\" href=\"#batch-all\">#</a></h4>\n<ul>\n<li>é€‰æ‹©æ‰€æœ‰åˆæ³•çš„ä¸‰å…ƒç»„(æ­£æ ·æœ¬å’ŒanchoråŒæ ‡ç­¾, è´Ÿæ ·æœ¬å’Œanchoræ ‡ç­¾ä¸åŒ), åˆ¨é™¤æ‰easy negativeä¹‹åå–å¹³å‡loss</li>\n<li>æ€»å…±å¯èƒ½çš„ä¸‰å…ƒç»„æ•°ç›® PK(K-1)(PK-K), ä¾æ¬¡è¡¨ç¤º, anchorå¯èƒ½æ•°ç›®, postive å¯èƒ½æ•°ç›®, negative å¯èƒ½æ•°ç›®</li>\n</ul>\n<h4 id=\"batch-hard\">batch hard <a class=\"direct-link\" href=\"#batch-hard\">#</a></h4>\n<ul>\n<li>æ¯ä¸€ä¸ªanchor, åœ¨å½“å‰ batchä¸­ é€‰æ‹©æœ€å›°éš¾çš„æ­£æ ·æœ¬(d(a,p) æœ€å¤§) å’Œæœ€å›°éš¾çš„è´Ÿæ ·æœ¬( d(a, n)æœ€å°)å½¢æˆä¸‰å…ƒç»„è¿›è¡Œè®­ç»ƒ</li>\n<li>æ€»å…±å¯èƒ½çš„ä¸‰å…ƒç»„å°±æ˜¯ PK, æ¯ä¸ªbatchå°±åªé€‰æ‹©æœ€å›°éš¾çš„è®­ç»ƒæ ·æœ¬è¿›è¡Œè®­ç»ƒï¼ˆè®ºæ–‡å£°ç§°è¿™æ ·æ¯” batch allè¡¨ç°å¥½, å¥½ä¸å¥½ä¸çŸ¥é“, ä½†æ˜¯è®­ç»ƒæ—¶é—´çŸ­æ˜¯çœŸçš„ï¼‰</li>\n</ul>\n<h4 id=\"%E5%90%8E%E7%BB%AD%E7%AB%A0%E8%8A%82(%E7%95%A5)\">åç»­ç« èŠ‚(ç•¥) <a class=\"direct-link\" href=\"#%E5%90%8E%E7%BB%AD%E7%AB%A0%E8%8A%82(%E7%95%A5)\">#</a></h4>\n<p>ä¸‹é¢æ˜¯ä»£ç å®ç°å’Œç¤ºä¾‹é¡¹ç›®, ç›´æ¥çœ‹åŸåšå°±å¥½äº†ã€‚ å°¤å…¶æ˜¯ä½œè€…å…³äº batch hard strategy çš„å®ç°, å¯è°“æ˜¯èµå¿ƒæ‚¦ç›®, å€¼å¾—å¥½å¥½å­¦ä¹ </p>\n<h4 id=\"%E6%84%9F%E6%83%B3\">æ„Ÿæƒ³ <a class=\"direct-link\" href=\"#%E6%84%9F%E6%83%B3\">#</a></h4>\n<p>triplet loss çš„æ€æƒ³å’Œä¹‹å‰çœ‹è¿‡çš„ä¸€ä¸ª<a href=\"https://github.com/wvangansbeke/Unsupervised-Classification\">æ–‡ç« </a>æœ‰ä¸€äº›ç›¸ä¼¼, éƒ½æ˜¯å…³æ³¨æ ·æœ¬å†…éƒ¨ç›¸åŒæ ‡ç­¾å’Œä¸åŒæ ‡ç­¾çš„å·®å¼‚æ€§, åè€…è§£å†³çš„æ˜¯å›ºå®šæ ‡ç­¾æ•°ç›®çš„æ— ç›‘ç£åˆ†ç±»é—®é¢˜, ç›´æ¥ç”¨å›¾ç‰‡çš„å˜åŒ–è®¤ä¸ºæ˜¯ä¸€ä¸ªæ­£æ ·æœ¬æ¥åš, anchorå’Œæ­£æ ·æœ¬çš„è·ç¦»å°½å¯èƒ½å°, é…åˆ self-labelling (æŠŠç½®ä¿¡åº¦é«˜çš„ç›´æ¥å½“æˆæ ‡æ³¨æ•°æ®) è®©æ— ç›‘ç£åˆ†ç±»çš„å‡†ç¡®ç‡ç›´æ¥è¾¾åˆ°äº† 85% ä»¥ä¸Š</p>\n<p>å¯¹äºå•†å“åŒ¹é…é—®é¢˜, ä»ç±»é—´å·®å¼‚å’Œç±»å†…å…±æ€§å‡ºå‘, æœ‰æ²¡æœ‰å¯èƒ½æŒ–æ˜ä¸€äº›å¼±ç›‘ç£çš„è®­ç»ƒæ‰‹æ®µå‘¢ ?</p>\n",
      "date_published": "2021-08-17T00:00:00-00:00"
    },{
      "id": "https://skadai.github.io/posts/flask_caching/",
      "url": "https://skadai.github.io/posts/flask_caching/",
      "title": "åˆ©ç”¨ flask_caching æ·»åŠ ç¼“å­˜",
      "content_html": "<h4 id=\"%E8%83%8C%E6%99%AF\">èƒŒæ™¯ <a class=\"direct-link\" href=\"#%E8%83%8C%E6%99%AF\">#</a></h4>\n<p>å·¥ä½œä¸­æ¥åˆ°åé¦ˆï¼Œæˆ‘è´Ÿè´£çš„æœåŠ¡åœ¨è·‘æ•°è¿‡ç¨‹ä¸­ç»å¸¸ä¼šé‡åˆ°ä¸€äº›ä¸šåŠ¡é€»è¾‘çš„å˜åŒ–è€Œé‡åˆ·æ•°æ®ï¼Œç›¸åŒçš„æ•°æ®è¦åå¤çš„è¯·æ±‚æœåŠ¡ï¼Œè€ŒæœåŠ¡ä¸­ç”¨åˆ°äº†æ·±åº¦å­¦ä¹ æ¨¡å‹ï¼Œæ¯”è¾ƒè€—æ—¶ï¼Œå› æ­¤å¸Œæœ›æ·»åŠ ç¼“å­˜</p>\n<h4 id=\"%E9%9C%80%E6%B1%82\">éœ€æ±‚ <a class=\"direct-link\" href=\"#%E9%9C%80%E6%B1%82\">#</a></h4>\n<ol>\n<li>ä¸ºæœåŠ¡æ·»åŠ ç¼“å­˜ï¼Œæ”¶åˆ°æœåŠ¡ä¹‹åï¼Œä¼˜å…ˆæŸ¥è¯¢ç¼“å­˜ï¼Œç¼“å­˜æ²¡æœ‰æ‰å»è°ƒç”¨æœåŠ¡</li>\n<li>å¦‚æœè¯·æ±‚è¿”å›çš„æ˜¯exception errorï¼Œ ä¸éœ€è¦ç¼“å­˜ï¼ˆæœ‰å¯èƒ½æ˜¯model æœåŠ¡ä¸ç¨³å®šé€ æˆçš„ï¼‰</li>\n<li>å¦‚æœè¯·æ±‚ä¸­æ˜ç¡®è¯´æ˜ä¸ç”¨ç¼“å­˜ï¼Œéœ€è¦è·³è¿‡</li>\n</ol>\n<h4 id=\"%E6%8A%80%E6%9C%AF%E6%96%B9%E6%A1%88\">æŠ€æœ¯æ–¹æ¡ˆ <a class=\"direct-link\" href=\"#%E6%8A%80%E6%9C%AF%E6%96%B9%E6%A1%88\">#</a></h4>\n<p>Flask_Caching åº“åŸºæœ¬å¯ä»¥æ»¡è¶³è¦æ±‚ ï¼ˆé€‰æ‹©ç¬¬ä¸‰æ–¹åº“å°½é‡é€‰æ‹©ä¸€ç›´æœ‰ç»´æŠ¤çš„ï¼Œæ¯”å¦‚è¿˜æœ‰ä¸€ä¸ªåº“ flask_cacheå·²ç»è¶…è¿‡ä¸€å¹´æ²¡æœ‰ commit äº†ï¼Œå°½é‡ä¸è¦é€‰ï¼‰</p>\n<h4 id=\"%E5%85%B7%E4%BD%93%E5%AE%9E%E6%96%BD%E5%85%B3%E9%94%AE%E7%82%B9\">å…·ä½“å®æ–½å…³é”®ç‚¹ <a class=\"direct-link\" href=\"#%E5%85%B7%E4%BD%93%E5%AE%9E%E6%96%BD%E5%85%B3%E9%94%AE%E7%82%B9\">#</a></h4>\n<p>é’ˆå¯¹éœ€æ±‚ï¼Œè¿›ä¸€æ­¥è€ƒè™‘å®ç°è¿‡ç¨‹ä¸­å¯èƒ½ä¼šé‡åˆ°çš„é—®é¢˜ï¼Œæœ‰æ—¶å€™æœªå¿…è€ƒè™‘çš„æ¸…æ¥šï¼Œå¯èƒ½éœ€è¦åœ¨å®æ–½çš„æ—¶å€™æ‰èƒ½å¤Ÿå‘ç°ï¼Œä½†æ˜¯è¿™ä¸€æ­¥æå‰è€ƒè™‘æ˜¯éœ€è¦åšçš„</p>\n<ol>\n<li>\n<p>ç”¨ä»€ä¹ˆä½œä¸ºç¼“å­˜çš„key?<br>\næœ¬æœåŠ¡çš„ apiè¯·æ±‚  æ˜¯jsonæ ¼å¼çš„POSTï¼Œ æˆ‘ä»¬éœ€è¦ç”¨è¯·æ±‚çš„å­—æ®µä½œä¸ºkey</p>\n</li>\n<li>\n<p>ç¼“å­˜è¿‡æœŸæ—¶é—´ï¼Ÿ<br>\nç¼“å­˜å¯ä»¥è®¾ç½®è‡ªåŠ¨å¤±æ•ˆæ—¶é—´ï¼Œå› ä¸º ETL ä¸€èˆ¬é‡åˆ·ä»»åŠ¡é—´éš”æ—¶é—´æ˜¯æ¯”è¾ƒçŸ­çš„ï¼Œé€šè¿‡é…ç½®å‚æ•° CACHE_DEFAULT_TIMEOUT åœ¨cacheåˆå§‹åŒ–çš„æ—¶å€™ä¼ å…¥å³å¯ï¼Œcacheåœ¨åˆ°æœŸä¹‹åä¼šè‡ªåŠ¨åˆ é™¤æ‰ï¼Œè¿™æ ·ä¸éœ€è¦ä¸ºæ¯ä¸ªå‡½æ•°å•ç‹¬æŒ‡å®šå¤±æ•ˆæ—¶é—´</p>\n<pre class=\"language-python\"><code class=\"language-python\">    <span class=\"token keyword\">from</span> flask <span class=\"token keyword\">import</span> Flask<br>    <span class=\"token keyword\">from</span> flask_caching <span class=\"token keyword\">import</span> Cache<br>    config <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><br>        <span class=\"token string\">\"DEBUG\"</span><span class=\"token punctuation\">:</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span>          <span class=\"token comment\"># some Flask specific configs</span><br>        <span class=\"token string\">\"CACHE_TYPE\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"SimpleCache\"</span><span class=\"token punctuation\">,</span>  <span class=\"token comment\"># Flask-Caching related configs</span><br>        <span class=\"token string\">\"CACHE_DEFAULT_TIMEOUT\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">300</span><br>    <span class=\"token punctuation\">}</span><br>    app <span class=\"token operator\">=</span> Flask<span class=\"token punctuation\">(</span>__name__<span class=\"token punctuation\">)</span><br>    <span class=\"token comment\"># tell Flask to use the above defined config</span><br>    app<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span>from_mapping<span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">)</span><br>    cache <span class=\"token operator\">=</span> Cache<span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">)</span></code></pre>\n</li>\n<li>\n<p>å¦‚ä½•å®ç°å½“æœåŠ¡æœ‰æ­£å¸¸ç»“æœçš„æ—¶å€™å°±ç¼“å­˜ï¼Œæ²¡æœ‰æ­£å¸¸ç»“æœçš„æ—¶å€™å°±ä¸ç¼“å­˜<br>\né€šè¿‡æŸ¥çœ‹ flask_cachingçš„æ–‡æ¡£å‘ç°,  è¿™ä¸ªåº“æ˜¯é€šè¿‡æ·»åŠ  caching.cached è£…é¥°å™¨æ¥å®ç°ç¼“å­˜çš„<br>\n@app.route(&quot;/&quot;)<br>\n@cache.cached(timeout=50)<br>\ndef index():<br>\nreturn render_template('index.html')</p>\n</li>\n</ol>\n<p>è¿›ä¸€æ­¥å»çœ‹ cache.cached æœ¬èº«çš„ä»£ç (çœç•¥æ— å…³çš„ä»£ç )</p>\n<ul>\n<li>å‡½æ•°æœ¬èº«è¿”å›çš„æ˜¯ä¸€ä¸ªè£…é¥°å™¨</li>\n<li>æœ‰ä¸‹é¢çš„å­—æ®µæ˜¯å’Œè¦ä¸è¦è®¾ç½®ç¼“å­˜ç›¸å…³çš„\n<ul>\n<li>response_filter:   å‘ç”Ÿåœ¨ä¸»é€»è¾‘è®¡ç®—ä¹‹åï¼Œå¯¹ç»“æœè¿›è¡Œè¿‡æ»¤ï¼Œæ¯”å¦‚æˆ‘ä»¬å¯ä»¥è®¾ç½®å¦‚æœç»“æœæ˜¯500é”™è¯¯å°±ä¸ç¼“å­˜äº†</li>\n<li>unless: å‘ç”Ÿåœ¨ä¸»é€»è¾‘è®¡ç®—ä¹‹å‰,  å¯ä»¥è®¾ç½®ä¸€ä¸ªç‰¹æ®Šæ¡ä»¶ï¼Œå¦‚æœæ»¡è¶³ï¼Œé‚£ä¹ˆä¸èµ°ç¼“å­˜ï¼ˆä¹Ÿä¸ä¼šä¿å­˜ç¼“å­˜äº†ï¼‰</li>\n</ul>\n</li>\n</ul>\n<p>æˆ‘ä»¬å¸Œæœ›å‘ç”Ÿ 500é”™è¯¯ä¸éœ€è¦ç¼“å­˜ï¼Œé‚£ä¹ˆresponse_filterè¿™ä¸ªå‚æ•°æ¯”è¾ƒç¬¦åˆè¦æ±‚ï¼Œæ­¤å¤–è¿˜æœ‰ä¸€ä¸ªæ¯”è¾ƒéšè”½çš„åšæ³•ï¼Œå°±æ˜¯å¦‚æœè·¯ç”±å‡½æ•°æ‰§è¡Œçš„æ­»åæŠ›å‡ºäº†å¼‚å¸¸ï¼Œè¿™ä¸ªæ—¶å€™å¼‚å¸¸äº¤ç»™å•ç‹¬çš„error handler å¤„ç†ï¼Œå…¶å®ä¹Ÿæ˜¯ä¸ä¼šä¿å­˜ç¼“å­˜çš„</p>\n<blockquote>\n<p>Alternately, looking at the code for Flask-Cache it appears it<br>\ndoes not handle errors thrown by the view<br>\n. So you could   simply raise the error yourself and handle the exception with a separate handler:<br>\næ‘˜è‡ª stack overflow</p>\n</blockquote>\n<p>ç”±äºå¼€å‘æ—¶å€™æ²¡æœ‰ä»”ç»†çœ‹æ–‡æ¡£ğŸ˜¢ï¼Œå…·ä½“å®ç°é‡‡ç”¨çš„æ˜¯â€œæ¯”è¾ƒéšè”½çš„åšæ³•â€ï¼Œ response_filter åº”è¯¥æ›´åŠ ç›´è§‚ã€‚</p>\n<pre class=\"language-python\"><code class=\"language-python\"><br><span class=\"token keyword\">def</span> <span class=\"token function\">cached</span><span class=\"token punctuation\">(</span><br>    self<span class=\"token punctuation\">,</span><br>    timeout<span class=\"token punctuation\">:</span> Optional<span class=\"token punctuation\">[</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span><br>    key_prefix<span class=\"token punctuation\">:</span> <span class=\"token builtin\">str</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"view/%s\"</span><span class=\"token punctuation\">,</span><br>    unless<span class=\"token punctuation\">:</span> Optional<span class=\"token punctuation\">[</span>Callable<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span><br>    forced_update<span class=\"token punctuation\">:</span> Optional<span class=\"token punctuation\">[</span>Callable<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span><br>    response_filter<span class=\"token punctuation\">:</span> Optional<span class=\"token punctuation\">[</span>Callable<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span><br>    query_string<span class=\"token punctuation\">:</span> <span class=\"token builtin\">bool</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">False</span><span class=\"token punctuation\">,</span><br>    hash_method<span class=\"token punctuation\">:</span> Callable <span class=\"token operator\">=</span> hashlib<span class=\"token punctuation\">.</span>md5<span class=\"token punctuation\">,</span><br>    cache_none<span class=\"token punctuation\">:</span> <span class=\"token builtin\">bool</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">False</span><span class=\"token punctuation\">,</span><br>    make_cache_key<span class=\"token punctuation\">:</span> Optional<span class=\"token punctuation\">[</span>Callable<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span><br>    source_check<span class=\"token punctuation\">:</span> Optional<span class=\"token punctuation\">[</span><span class=\"token builtin\">bool</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span><br><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> Callable<span class=\"token punctuation\">:</span><br>    <span class=\"token triple-quoted-string string\">\"\"\"Decorator. Use this to cache a function. By default the cache key<br>    is `view/request.path`. You are able to use this decorator with any<br>    function by changing the `key_prefix`. If the token `%s` is located<br>    within the `key_prefix` then it will replace that with `request.path`<br>    <br>    Example::<br>    <br>        # An example view function<br>        @cache.cached(timeout=50)<br>        def big_foo():<br>            return big_bar_calc()<br>    <br>        # An example misc function to cache.<br>        @cache.cached(key_prefix='MyCachedList')<br>        def get_list():<br>            return [random.randrange(0, 1) for i in range(50000)]<br>    <br>        my_list = get_list()<br>    <br>    .. note::<br>    <br>        You MUST have a request context to actually called any functions<br>        that are cached.<br>    <br>    .. versionadded:: 0.4<br>        The returned decorated function now has three function attributes<br>        assigned to it. These attributes are readable/writable.<br>    <br>            **uncached**<br>                The original undecorated function<br>    <br>            **cache_timeout**<br>                The cache timeout value for this function. For a<br>                custom value to take affect, this must be set before the<br>                function is called.<br>    <br>            **make_cache_key**<br>                A function used in generating the cache_key used.<br>    <br>                readable and writable<br>    <br>    :param timeout: Default None. If set to an integer, will cache for that<br>                    amount of time. Unit of time is in seconds.<br>    <br>    :param key_prefix: Default 'view/%(request.path)s'. Beginning key to .<br>                    use for the cache key. `request.path` will be the<br>                    actual request path, or in cases where the<br>                    `make_cache_key`-function is called from other<br>                    views it will be the expected URL for the view<br>                    as generated by Flask's `url_for()`.<br>    <br>                    .. versionadded:: 0.3.4<br>                        Can optionally be a callable which takes<br>                        no arguments but returns a string that will<br>                        be used as the cache_key.<br>    <br>    :param unless: Default None. Cache will *always* execute the caching<br>                facilities unless this callable is true.<br>                This will bypass the caching entirely.<br>    <br>    :param forced_update: Default None. If this callable is true,<br>                        cache value will be updated regardless cache<br>                        is expired or not. Useful for background<br>                        renewal of cached functions.<br>    <br>    :param response_filter: Default None. If not None, the callable is<br>                            invoked after the cached funtion evaluation,<br>                            and is given one arguement, the response<br>                            content. If the callable returns False, the<br>                            content will not be cached. Useful to prevent<br>                            caching of code 500 responses.<br>    <br>    :param query_string: Default False. When True, the cache key<br>                        used will be the result of hashing the<br>                        ordered query string parameters. This<br>                        avoids creating different caches for<br>                        the same query just because the parameters<br>                        were passed in a different order. See<br>                        _make_cache_key_query_string() for more<br>                        details.<br>    <br>    :param hash_method: Default hashlib.md5. The hash method used to<br>                        generate the keys for cached results.<br>    :param cache_none: Default False. If set to True, add a key exists<br>                    check when cache.get returns None. This will likely<br>                    lead to wrongly returned None values in concurrent<br>                    situations and is not recommended to use.<br>    :param make_cache_key: Default None. If set to a callable object,<br>                    it will be called to generate the cache key<br>    <br>    :param source_check: Default None. If None will use the value set by<br>                        CACHE_SOURCE_CHECK.<br>                        If True, include the function's source code in the<br>                        hash to avoid using cached values when the source<br>                        code has changed and the input values remain the<br>                        same. This ensures that the cache_key will be<br>                        formed with the function's source code hash in<br>                        addition to other parameters that may be included<br>                        in the formation of the key.<br>    <br>    \"\"\"</span><br>    <span class=\"token keyword\">def</span> <span class=\"token function\">decorator</span><span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>        <span class=\"token decorator annotation punctuation\">@functools<span class=\"token punctuation\">.</span>wraps</span><span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">)</span><br>        <span class=\"token keyword\">def</span> <span class=\"token function\">decorated_function</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>args<span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>kwargs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>            <span class=\"token comment\">#: Bypass the cache entirely.</span><br>            <span class=\"token keyword\">if</span> self<span class=\"token punctuation\">.</span>_bypass_cache<span class=\"token punctuation\">(</span>unless<span class=\"token punctuation\">,</span> f<span class=\"token punctuation\">,</span> <span class=\"token operator\">*</span>args<span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>kwargs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>                <span class=\"token keyword\">return</span> f<span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>args<span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>kwargs<span class=\"token punctuation\">)</span><br><br>            <span class=\"token keyword\">nonlocal</span> source_check<br>            <span class=\"token keyword\">if</span> source_check <span class=\"token keyword\">is</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">:</span><br>                source_check <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>source_check<br><br>            <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span><br>                <span class=\"token comment\"># é¦–å…ˆè®¡ç®— cached_key </span><br>                <span class=\"token keyword\">if</span> make_cache_key <span class=\"token keyword\">is</span> <span class=\"token keyword\">not</span> <span class=\"token boolean\">None</span> <span class=\"token keyword\">and</span> <span class=\"token builtin\">callable</span><span class=\"token punctuation\">(</span>make_cache_key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>                    cache_key <span class=\"token operator\">=</span> make_cache_key<span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>args<span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>kwargs<span class=\"token punctuation\">)</span><br>                <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span><br>                    cache_key <span class=\"token operator\">=</span> _make_cache_key<span class=\"token punctuation\">(</span><br>                        args<span class=\"token punctuation\">,</span> kwargs<span class=\"token punctuation\">,</span> use_request<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><br>                    <span class=\"token punctuation\">)</span><br>                <br>                <span class=\"token comment\"># æŸ¥è¯¢ç¼“å­˜</span><br>                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><br>                    <span class=\"token builtin\">callable</span><span class=\"token punctuation\">(</span>forced_update<span class=\"token punctuation\">)</span><br>                    <span class=\"token keyword\">and</span> <span class=\"token punctuation\">(</span><br>                        forced_update<span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>args<span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>kwargs<span class=\"token punctuation\">)</span><br>                        <span class=\"token keyword\">if</span> wants_args<span class=\"token punctuation\">(</span>forced_update<span class=\"token punctuation\">)</span><br>                        <span class=\"token keyword\">else</span> forced_update<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br>                    <span class=\"token punctuation\">)</span><br>                    <span class=\"token keyword\">is</span> <span class=\"token boolean\">True</span><br>                <span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>                    rv <span class=\"token operator\">=</span> <span class=\"token boolean\">None</span><br>                    found <span class=\"token operator\">=</span> <span class=\"token boolean\">False</span><br>                <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span><br>                    rv <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>cache<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>cache_key<span class=\"token punctuation\">)</span><br>                    found <span class=\"token operator\">=</span> <span class=\"token boolean\">True</span><br><br>                    <span class=\"token comment\"># If the value returned by cache.get() is None, it</span><br>                    <span class=\"token comment\"># might be because the key is not found in the cache</span><br>                    <span class=\"token comment\"># or because the cached value is actually None</span><br>                    <span class=\"token keyword\">if</span> rv <span class=\"token keyword\">is</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">:</span><br>                        <span class=\"token comment\"># If we're sure we don't need to cache None values</span><br>                        <span class=\"token comment\"># (cache_none=False), don't bother checking for</span><br>                        <span class=\"token comment\"># key existence, as it can lead to false positives</span><br>                        <span class=\"token comment\"># if a concurrent call already cached the</span><br>                        <span class=\"token comment\"># key between steps. This would cause us to</span><br>                        <span class=\"token comment\"># return None when we shouldn't</span><br>                        <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> cache_none<span class=\"token punctuation\">:</span><br>                            found <span class=\"token operator\">=</span> <span class=\"token boolean\">False</span><br>                        <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span><br>                            found <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>cache<span class=\"token punctuation\">.</span>has<span class=\"token punctuation\">(</span>cache_key<span class=\"token punctuation\">)</span><br>            <span class=\"token keyword\">except</span> Exception<span class=\"token punctuation\">:</span><br>                <span class=\"token keyword\">if</span> self<span class=\"token punctuation\">.</span>app<span class=\"token punctuation\">.</span>debug<span class=\"token punctuation\">:</span><br>                    <span class=\"token keyword\">raise</span><br>                logger<span class=\"token punctuation\">.</span>exception<span class=\"token punctuation\">(</span><span class=\"token string\">\"Exception possibly due to cache backend.\"</span><span class=\"token punctuation\">)</span><br>                <span class=\"token comment\"># å¦‚æœåœ¨æŸ¥è¯¢ç¼“å­˜çš„æ—¶å€™é‡åˆ°äº†é”™è¯¯ï¼Œå°±ä¼šè¿›å…¥æœ¬èº«çš„å‡½æ•°è®¡ç®—</span><br>                <span class=\"token keyword\">return</span> f<span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>args<span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>kwargs<span class=\"token punctuation\">)</span><br>                <br>            <span class=\"token comment\"># å¦‚æœæ²¡æœ‰ç¼“å­˜ï¼Œæ‰§è¡Œæœ¬èº«å‡½æ•°</span><br>            <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> found<span class=\"token punctuation\">:</span><br>                <span class=\"token comment\"># æ³¨æ„è¿™ä¸€è¡Œ, å¦‚æœåœ¨æ‰§è¡Œ f(*args, **kwargs)çš„æ—¶å€™æŠ¥é”™ï¼Œä¹Ÿä¸ä¼šå†æ‰§è¡Œä¸‹é¢çš„ç¯èŠ‚äº†</span><br>                rv <span class=\"token operator\">=</span> f<span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>args<span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>kwargs<span class=\"token punctuation\">)</span><br>                <span class=\"token keyword\">if</span> response_filter <span class=\"token keyword\">is</span> <span class=\"token boolean\">None</span> <span class=\"token keyword\">or</span> response_filter<span class=\"token punctuation\">(</span>rv<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>                    <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span><br>                        self<span class=\"token punctuation\">.</span>cache<span class=\"token punctuation\">.</span><span class=\"token builtin\">set</span><span class=\"token punctuation\">(</span><br>                            cache_key<span class=\"token punctuation\">,</span><br>                            rv<span class=\"token punctuation\">,</span><br>                            timeout<span class=\"token operator\">=</span>decorated_function<span class=\"token punctuation\">.</span>cache_timeout<span class=\"token punctuation\">,</span><br>                        <span class=\"token punctuation\">)</span><br>                    <span class=\"token keyword\">except</span> Exception<span class=\"token punctuation\">:</span><br>                        <span class=\"token keyword\">if</span> self<span class=\"token punctuation\">.</span>app<span class=\"token punctuation\">.</span>debug<span class=\"token punctuation\">:</span><br>                            <span class=\"token keyword\">raise</span><br>                        logger<span class=\"token punctuation\">.</span>exception<span class=\"token punctuation\">(</span><br>                            <span class=\"token string\">\"Exception possibly due to cache backend.\"</span><br>                        <span class=\"token punctuation\">)</span><br>            <span class=\"token keyword\">return</span> rv<br><br>        <span class=\"token keyword\">def</span> <span class=\"token function\">default_make_cache_key</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>args<span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>kwargs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>            <span class=\"token comment\"># Convert non-keyword arguments (which is the way</span><br>            <span class=\"token comment\"># `make_cache_key` expects them) to keyword arguments</span><br>            <span class=\"token comment\"># (the way `url_for` expects them)</span><br>            argspec_args <span class=\"token operator\">=</span> inspect<span class=\"token punctuation\">.</span>getfullargspec<span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>args<br><br>            <span class=\"token keyword\">for</span> arg_name<span class=\"token punctuation\">,</span> arg <span class=\"token keyword\">in</span> <span class=\"token builtin\">zip</span><span class=\"token punctuation\">(</span>argspec_args<span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>                kwargs<span class=\"token punctuation\">[</span>arg_name<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> arg<br><br>            <span class=\"token keyword\">return</span> _make_cache_key<span class=\"token punctuation\">(</span>args<span class=\"token punctuation\">,</span> kwargs<span class=\"token punctuation\">,</span> use_request<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span><br><br>        <span class=\"token keyword\">def</span> <span class=\"token function\">_make_cache_key_query_string</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>            <span class=\"token keyword\">pass</span><br><br>        <span class=\"token keyword\">def</span> <span class=\"token function\">_make_cache_key</span><span class=\"token punctuation\">(</span>args<span class=\"token punctuation\">,</span> kwargs<span class=\"token punctuation\">,</span> use_request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>            <span class=\"token keyword\">pass</span><br><br>    <span class=\"token keyword\">return</span> decorator</code></pre>\n<ol start=\"4\">\n<li>å¦‚æœåœ¨è¯·æ±‚ä¸­æ˜¾å¼çš„å£°æ˜äº†ä¸ä½¿ç”¨ç¼“å­˜ï¼Œå¦‚ä½•è·³è¿‡ç¼“å­˜?<br>\næ ¹æ®ä¸Šé¢çš„åˆ†æï¼Œunless å‚æ•°å…¶å®æ˜¯å¯ä»¥å®Œç¾é€‚ç”¨çš„ï¼Œæˆ‘ä»¬ä¸ºè¯·æ±‚æ·»åŠ ä¸€ä¸ª bypass å‚æ•°ï¼Œé»˜è®¤æ˜¯falseï¼Œ è¡¨ç¤ºä¼˜å…ˆä½¿ç”¨ç¼“å­˜ï¼Œ å¦‚æœä¼ å…¥ true, å°±è·³è¿‡ç¼“å­˜ ï¼Œç„¶åç»™ cache.cached ä¼ å…¥ unless å‚æ•°ä¸ºå½“å‰è¯·æ±‚çš„bypasså‚æ•°å°±å¥½äº†</li>\n</ol>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">is_bypass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    payload <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>json<br>    <span class=\"token keyword\">return</span> payload<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'bypass'</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span><br>    <br><br><span class=\"token decorator annotation punctuation\">@app<span class=\"token punctuation\">.</span>route</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/analysis\"</span><span class=\"token punctuation\">,</span> methods<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"POST\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><br><span class=\"token decorator annotation punctuation\">@cache<span class=\"token punctuation\">.</span>cached</span><span class=\"token punctuation\">(</span>key_prefix<span class=\"token operator\">=</span>cache_key<span class=\"token punctuation\">,</span> unless<span class=\"token operator\">=</span>is_bypass<span class=\"token punctuation\">)</span><br><span class=\"token keyword\">def</span> <span class=\"token function\">analysis</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    <span class=\"token comment\"># ä¸»è·¯ç”±å‡½æ•°è´Ÿè´£å¤„ç† api è°ƒç”¨</span><br>    <span class=\"token keyword\">pass</span></code></pre>\n<ol start=\"5\">\n<li>å¦‚ä½•é™åˆ¶ç¼“å­˜çš„å ç”¨ç©ºé—´å¤§å°ï¼Ÿ<br>\nflask_caching æ”¯æŒå¤šç§ç¼“å­˜çš„åç«¯ï¼Œå¯ä»¥æ˜¯å¯flask ç¨‹åºåŒä¸€ä¸ªè¿›ç¨‹é‡Œé¢çš„cacheï¼Œå¯ä»¥æ˜¯å•ç‹¬å­˜åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œå¯ä»¥æ˜¯redis, memcached æ•°æ®åº“ä½œä¸ºç¼“å­˜åç«¯ï¼Œç”šè‡³å¯ä»¥å•ç‹¬å®šä¹‰ä¸€ä¸ªä½ è‡ªå·±çš„ç¼“å­˜åç«¯ï¼Œåªè¦ç¬¦åˆflask_cachingæ‰€è¦æ±‚çš„çš„apiæ¥å£å°±å¯ä»¥ã€‚<br>\nç®€å•èµ·è§ï¼Œæˆ‘ä»¬ç”¨äº† redisä½œä¸ºç¼“å­˜åç«¯ï¼Œåˆ©ç”¨ k8s å¯åŠ¨redis containerçš„æ—¶å€™é™åˆ¶ä¸€ä¸‹ redis å ç”¨çš„æœ€å¤§å†…å­˜å°±å¥½äº†ï¼Œæ²¡æœ‰ç”¨ä»€ä¹ˆç¼“å­˜æ·˜æ±°ç®—æ³• (æ¯”å¦‚ LRU )</li>\n</ol>\n<pre class=\"language-yaml\"><code class=\"language-yaml\">    <span class=\"token comment\"># ....ä»¥ä¸Šçœç•¥....</span><br>    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> social<span class=\"token punctuation\">-</span>nlp<span class=\"token punctuation\">-</span>redis<br>    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> redis<span class=\"token punctuation\">:</span>4.0.14<br>    <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span><br>        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">containerPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">6379</span><br>    <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span><br>        <span class=\"token key atrule\">requests</span><span class=\"token punctuation\">:</span><br>        <span class=\"token key atrule\">memory</span><span class=\"token punctuation\">:</span> 256Mi<br>        <span class=\"token key atrule\">limits</span><span class=\"token punctuation\">:</span><br>        <span class=\"token key atrule\">memory</span><span class=\"token punctuation\">:</span> 1Gi</code></pre>\n<h4 id=\"%E6%B5%8B%E8%AF%95\">æµ‹è¯• <a class=\"direct-link\" href=\"#%E6%B5%8B%E8%AF%95\">#</a></h4>\n<p>å¯¹ä¸‹é¢çš„å…³é”®ç‚¹è¿›è¡Œæµ‹è¯•ï¼Œä¿è¯æ”¹åŠ¨æ˜¯å¯ä»¥æ»¡è¶³éœ€æ±‚çš„</p>\n<ul>\n<li>æµ‹è¯• unless å‚æ•°æ˜¯å¤Ÿç”Ÿæ•ˆ (æ‰‹åŠ¨ä¿®æ”¹ä¼ å…¥çš„å‚æ•° bypass ä¸º trueï¼ŒæŸ¥çœ‹æ˜¯å¦æœ‰æ‰§è¡Œåˆ°è·¯ç”±å‡½æ•°å†…éƒ¨)</li>\n<li>æµ‹è¯• 500 é”™è¯¯æ˜¯ä¸æ˜¯ç¼“å­˜äº†ï¼ˆæŠŠmodel svcåœ°å€å¡«é”™æ„é€ ä¸€ä¸ªé”™è¯¯ï¼‰</li>\n<li>æµ‹è¯•ç¼“å­˜å¤±æ•ˆçš„æ—¶å€™èƒ½å¤Ÿæ­£å¸¸ä½¿ç”¨ ï¼ˆå…³æ‰redis æœåŠ¡ï¼‰</li>\n<li>æµ‹è¯•å¼€å…³ç¼“å­˜æ—¶wrkæ€§èƒ½åŒºåˆ«ï¼ˆ&lt;200    =&gt;    1000+ï¼‰</li>\n</ul>\n<h4 id=\"%E9%99%84%E5%BD%95\">é™„å½• <a class=\"direct-link\" href=\"#%E9%99%84%E5%BD%95\">#</a></h4>\n<ul>\n<li>ç¼“å­˜çš„ç®€å•ä»‹ç»  <a href=\"https://www.youtube.com/watch?v=U3RkDLtS7uY\">https://www.youtube.com/watch?v=U3RkDLtS7uY</a> (å°åº¦å°å“¥é£šè‹±è¯­)</li>\n</ul>\n",
      "date_published": "2021-08-15T00:00:00-00:00"
    },{
      "id": "https://skadai.github.io/posts/rsshub/",
      "url": "https://skadai.github.io/posts/rsshub/",
      "title": "è¯•ç”¨ RSSHub",
      "content_html": "<h4 id=\"rss-%E6%98%AF%E4%BB%80%E4%B9%88\">RSS æ˜¯ä»€ä¹ˆ <a class=\"direct-link\" href=\"#rss-%E6%98%AF%E4%BB%80%E4%B9%88\">#</a></h4>\n<p><a href=\"https://en.wikipedia.org/wiki/RSS\">RSS</a> çš„å…¨ç§°æ˜¯ RDF Site Summary æˆ–è€… Really Simple Syndication, <s>åˆ«é—®æˆ‘è‹±æ–‡å•¥æ„æ€æˆ‘ä¸è®¤è¯†</s><br>\nå°±æ˜¯è®©ä¸åŒçš„ç½‘ç«™çš„æ•°æ®éƒ½å¯ä»¥ç”¨ç»Ÿä¸€çš„æ ¼å¼è¿›è¡Œå®šä¹‰å’Œä¼ è¾“ï¼Œè¿™æ ·æˆ‘ä»¬å¯æŒ‘é€‰è‡ªå·±æ„Ÿå…´è¶£çš„ç½‘ç«™è¿›è¡Œè®¢é˜…ï¼Œè·å–åˆ°æ–°çš„æ–‡ç« é›†ä¸­é˜…è¯»äº†ï¼Œè¿™å¯ä»¥è®©æˆ‘ä»¬é›†ä¸­é˜…è¯»æ„Ÿå…´è¶£çš„æ–‡ç« ä¹ƒè‡³è§‚çœ‹è§†é¢‘ï¼Œä¸ç”¨åœ¨ç½‘ç«™ä¸Šé¢æ™ƒæ¥æ™ƒå»æµªè´¹æ—¶é—´å•¦</p>\n<h4 id=\"rss-%E9%98%85%E8%AF%BB%E5%99%A8\">RSS é˜…è¯»å™¨ <a class=\"direct-link\" href=\"#rss-%E9%98%85%E8%AF%BB%E5%99%A8\">#</a></h4>\n<p>ä¸å°‘ç½‘ç«™éƒ½æä¾›äº†ä¸‹é¢è¿™ä¸ªæŒ‰é’®ï¼Œå…¶å®ä»£è¡¨çš„å°±æ˜¯rssçš„æ„æ€ï¼Œç‚¹å‡»æŒ‰é’®å¯ä»¥å¾—åˆ°ä¸€ä¸ªurlï¼Œè¿™ä¸ªurlæä¾›çš„å°±æ˜¯å’Œæ­£å¼ç½‘ç«™ä¸€ç›´ä½†æ˜¯æ ·å¼æœ‰åˆ«çš„è®¢é˜…å†…å®¹äº†ï¼Œé€šå¸¸ä¼šæ˜¯xmlæ ¼å¼çš„æ–‡æœ¬ï¼Œæ‰€ä»¥æ˜¯æ²¡åŠæ³•æ–¹ä¾¿ç›´æ¥çœ‹çš„ã€‚<br>\n<img src=\"http://cdn.glofission.xyz/img/1b1fe7c45939aff7450787a980c29691-20210807171958-32a5c6.png\" alt=\"rss icon\"></p>\n<p>æ­¤æ—¶å‘¢ï¼Œæˆ‘ä»¬éœ€è¦æœ‰ä¸€ä¸ªé˜…è¯»å™¨å¯ä»¥è§£æè¿™ä¹ˆå†…å®¹å¹¶æ¸²æŸ“æˆè‰¯å¥½çš„æ ¼å¼ï¼Œæ¯”å¦‚ mac ç”¨æˆ·å¯ä»¥é€‰æ‹© <a href=\"https://reederapp.com/\">reeder</a>ã€‚<br>\nä½¿ç”¨çš„æ–¹å¼ä¹Ÿæ˜¯å¾ˆç®€å•çš„ï¼Œç›´æ¥åœ¨reederä¸­åˆ›å»ºä¸€ä¸ªæœ¬åœ°rssè´¦æˆ·, ç„¶åæ·»åŠ è®¢é˜…æº</p>\n<p><img src=\"http://cdn.glofission.xyz/img/5587b52eff73570439b162d574847050-20210807173555-f52921.png\" alt=\"reederæ“ä½œ\"></p>\n<p>ç„¶åå°±å¯ä»¥çœ‹åˆ°ï¼Œæ·»åŠ æºçš„æ–‡ç« å·²ç»ä¸€ä¸ªä¸ªæ’å¥½ç­‰å¾…é˜…è¯»äº†ï¼Œreeder é˜…è¯»å™¨å·²ç»å¸®å¿™æ¸²æŸ“å¥½äº†ï¼Œå¯ä»¥çœ‹åˆ°æ’ç‰ˆè¿˜æ˜¯ä¸é”™çš„</p>\n<p><img src=\"http://cdn.glofission.xyz/img/5f62ce7eb780ed571010188fe8765b2d-20210807173835-088b0a.png\" alt=\"reeder article\"></p>\n<h4 id=\"rsshub\">RSSHub <a class=\"direct-link\" href=\"#rsshub\">#</a></h4>\n<p>å®é™…ä¸Šï¼Œå¾ˆå¤šç½‘ç«™æ˜¯æ²¡æœ‰ä¸Šé¢é‚£ä¸ªé­”æ³•å›¾æ ‡çš„ï¼Œæ¯”å¦‚bç«™ï¼Œæˆ‘ä»¬æ¯æ¬¡å°±åªèƒ½è¿›å…¥ç½‘ç«™ï¼Œç‚¹å‡»å…³æ³¨çš„upåŠ¨æ€ï¼Œçœ‹æœ‰æ²¡æœ‰æŠ•ç¨¿ï¼Œç„¶åå†ç‚¹è¿›å»è§‚çœ‹äº†ä¹ˆï¼Ÿ</p>\n<p>å½“ç„¶æ˜¯æœ‰æ›´å¥½çš„åŠæ³•çš„ï¼Œ<a href=\"https://github.com/DIYgod/RSSHub\">RSSHub</a> å°±æ˜¯æ¥å¹²è¿™ä¸ªçš„</p>\n<blockquote>\n<p>RSSHub æ˜¯ä¸€ä¸ªå¼€æºã€ç®€å•æ˜“ç”¨ã€æ˜“äºæ‰©å±•çš„ RSS ç”Ÿæˆå™¨ï¼Œå¯ä»¥ç»™ä»»ä½•å¥‡å¥‡æ€ªæ€ªçš„å†…å®¹ç”Ÿæˆ RSS è®¢é˜…æºã€‚RSSHub å€ŸåŠ©äºå¼€æºç¤¾åŒºçš„åŠ›é‡å¿«é€Ÿå‘å±•ä¸­ï¼Œç›®å‰å·²é€‚é…æ•°ç™¾å®¶ç½‘ç«™çš„ä¸Šåƒé¡¹å†…å®¹</p>\n</blockquote>\n<p>ç¿»è¯‘ä¸€ä¸‹ï¼Œå°±æ˜¯ä¼šå†™ä»£ç çš„äººå·²ç»å¸®æŠŠä¸€äº›å¸¸ç”¨çš„ç½‘ç«™åšå¥½äº†æå–rssçš„æ–¹æ³•ï¼Œåªéœ€è¦æœ‰ä¸ªæœºå™¨èƒ½æ ¹æ®è¿™äº›æ–¹æ³•æŠŠç½‘ç«™æ•°æ®æ•´æˆæ ‡å‡† RSS çš„æ ¼å¼å¹¶æä¾› url é“¾æ¥ï¼Œç„¶åæˆ‘ä»¬å°±åƒä¸Šé¢é‚£æ ·ç”¨å°±å¥½äº†ã€‚ä¸‹é¢çš„å›¾ç‰‡å±•ç¤ºäº† RSSHub æ”¯æŒäº†å“ªäº›ç½‘ç«™ï¼Œè¿˜æ˜¯ç›¸å½“ä¸°å¯Œçš„</p>\n<p>RSSHub è‡ªå·±æ˜¯æä¾›äº†è¯•ç”¨ <a href=\"https://rsshub.app\">demo</a> çš„ï¼Œåªéœ€è¦ç®€å•çš„æŒ‰ç…§ä¸åŒç½‘ç«™æŒ‡å®šçš„urlæ ¼å¼è‡ªå·±æ‹¼æ¥ï¼Œç„¶åç›´æ¥ç²˜è´´åˆ°é˜…è¯»å™¨é‡Œé¢å°±å®Œäº‹äº†ï¼</p>\n<div style=\"display:flex;justify-content:space-between\">\n<img src=\"http://cdn.glofission.xyz/img/9d3beee4c6f6ef1f1228b0b706e80863-20210807175616-dc81cd.png\">\n<img src=\"http://cdn.glofission.xyz/img/179e3b153d7d76dc0497e6f7d4944a2a-20210807175551-b96172.png\">\n</div>\n<h4 id=\"rsshub-%E9%83%A8%E7%BD%B2\">RSSHub éƒ¨ç½² <a class=\"direct-link\" href=\"#rsshub-%E9%83%A8%E7%BD%B2\">#</a></h4>\n<p>å®˜æ–¹è¯•ç”¨çš„demoæ¯•ç«Ÿå¤ªå¤šäººç”¨ï¼Œå¾ˆå®¹æ˜“é­åˆ°ç½‘ç«™çš„åçˆ¬é™åˆ¶ï¼Œè¿™ä¸ªæ—¶å€™ä½ å¯ä»¥é€‰æ‹©è‡ªå·±éƒ¨ç½²ä¸€ä¸ª RSSHub çš„æœåŠ¡, RSSHub çš„å®˜æ–¹æ–‡æ¡£é‡Œé¢ä¹Ÿæœ‰ <a href=\"https://docs.rsshub.app/install/\">æ“ä½œè¯´æ˜</a>, äº²æµ‹å¯ç”¨</p>\n<p>ä¸‹é¢ç®€å•æè¿°ä¸‹æµç¨‹ï¼Œé¦–å…ˆå¾—æœ‰ä¸€ä¸ªè‡ªå·±çš„æœåŠ¡å™¨ï¼Œæˆ‘ç”¨çš„æ˜¯ aliyun ECS(å•æ ¸ å†…å­˜2GiB, ç¡¬ç›˜40GB)</p>\n<ol>\n<li>\n<p>ssh ç™»å½•åˆ°æœåŠ¡å™¨</p>\n</li>\n<li>\n<p>æ‹‰å– RSSHub çš„ Docker é•œåƒ, ä¸åŠ  tag çš„è¯ä¼šç›´æ¥ä¸‹è½½æœ€æ–°çš„</p>\n</li>\n</ol>\n<pre class=\"language-shell\"><code class=\"language-shell\">docker pull diygod/rsshub</code></pre>\n<blockquote>\n<p>å¦‚æœæ²¡æœ‰ç”¨è¿‡ docker çš„è¯éœ€è¦è‡ªå·±å…ˆå®‰è£…ä¸€ä¸‹ï¼Œ å¯ä»¥å‚è€ƒ <a href=\"https://www.runoob.com/docker/ubuntu-docker-install.html\">Ubuntu Dockerå®‰è£…</a></p>\n</blockquote>\n<ol start=\"3\">\n<li>å¯åŠ¨é•œåƒ</li>\n</ol>\n<pre class=\"language-shell\"><code class=\"language-shell\">docker run -d --name rsshub -p <span class=\"token number\">1200</span>:1200 diygod/rsshub</code></pre>\n<p>ç¨å¾®è§£é‡Šä¸€ä¸‹ä¸Šé¢è¿™ä¸ªå‘½ä»¤</p>\n<ul>\n<li><code>docker run</code> å°±æ˜¯æŠŠé•œåƒå¯åŠ¨ä¸€ä¸ªå®¹å™¨è·‘èµ·æ¥ï¼Œ<code>--name</code> ç»™å®¹å™¨å‘½åï¼Œ <code>-d</code> æŒ‡å®šåå°è¿è¡Œ</li>\n<li><code>-p 1200:1200</code> å¹¶è®©æœåŠ¡å™¨ä¸Šé¢çš„1200ç«¯å£å’Œå®¹å™¨å†…éƒ¨çš„1200å»ºç«‹æ˜ å°„ï¼Œè¿™æ ·åœ¨æœåŠ¡å™¨ä¸Šé¢è®¿é—® localhost:1200 å°±å¯ä»¥è®¿é—®åˆ°å®¹å™¨é‡Œé¢çš„æœåŠ¡äº†ï¼Œå®¹å™¨å†…éƒ¨çš„ç«¯å£1200æ˜¯å†™æ­»çš„ï¼Œä½†æ˜¯æœåŠ¡å™¨ä¸Šé¢çš„ç«¯å£æ˜¯å¯ä»¥ä¿®æ”¹çš„ï¼Œæ¯”å¦‚æ”¹æˆ8000ï¼ˆå¦‚æœæ²¡æœ‰å†²çªçš„è¯ï¼‰</li>\n</ul>\n<ol start=\"4\">\n<li>æœåŠ¡å™¨å®‰å…¨ç»„åŠ ä¸Š1200ç«¯å£, æ“ä½œå¦‚ä¸‹</li>\n</ol>\n<p>å¥½å§ï¼Œå…¶å®ä¸Šé¢ RSSHub æ–‡æ¡£é‡Œé¢éƒ½æœ‰....</p>\n<p><img src=\"http://cdn.glofission.xyz/img/a070687ca2ed0a117eac459bd2edfbfc-20210807181508-b0ee44.png\" alt=\"add rule\"></p>\n<p><img src=\"https://gitee.com/skadai/bluebird/raw/master/5a4ca0d6c33d77ffef06e1cbe305daef-20210808092442-13a705.png\" alt=\"add rule2\"></p>\n<ol start=\"5\">\n<li>æŠŠå®‰å…¨ç»„åº”ç”¨åˆ°ECSä¸Šé¢</li>\n</ol>\n<p><img src=\"http://cdn.glofission.xyz/img/c7c495b56bb08bcbbe1b7bc593012e6e-20210807182042-0a7e9a.png\" alt=\"apply rule\"></p>\n<p>ä¸Šé¢å›¾ç‰‡æ‰“ç çš„å°±æ˜¯æœåŠ¡å™¨çš„å…¬ç½‘ IPäº†ï¼Œç»è¿‡ä¸Šé¢ä¸€é€šæ“ä½œæˆ‘ä»¬åœ¨æµè§ˆå™¨è¾“å…¥ http://&lt;å…¬ç½‘IP&gt;:1200, çœ‹åˆ°å’Œä¸Šé¢ RSSHub demo ä¸€æ ·çš„é¡µé¢å°±ç®—éƒ¨ç½²æˆåŠŸäº†ï¼Œä¹‹åæˆ‘ä»¬å°±å¯ä»¥ç”¨ä¸“å±çš„RSS æå–æœåŠ¡æ¥ç”Ÿæˆè®¢é˜…æºäº†ğŸ™‚</p>\n<p><img src=\"http://cdn.glofission.xyz/img/20dd670b20cc76c57676829ac7ba0657-20210807182335-38e268.png\" alt=\"final page\"></p>\n<hr>\n<p>æœ‰ä¸ª RSSHub + Reeder è¿™ä¸ªç»„åˆï¼Œå°±å¯ä»¥å¾ˆæ–¹ä¾¿æ·»åŠ è‡ªå·±æ„Ÿå…´è¶£çš„å†…å®¹äº†ï¼Œä¸ç”¨åœ¨æ¼«æ— ç›®çš„çš„çœ‹äº†ï¼Œå¤§å¤§çš„èŠ‚çœæ—¶é—´ï¼ˆ<s>maybeæ˜¯çœ‹äº†æ›´å¤šæœ‰çš„æ²¡çš„</s>ï¼‰</p>\n",
      "date_published": "2021-08-07T00:00:00-00:00"
    },{
      "id": "https://skadai.github.io/posts/deploy_11ty_in_github-page/",
      "url": "https://skadai.github.io/posts/deploy_11ty_in_github-page/",
      "title": "å¦‚ä½•éƒ¨ç½²11tyåˆ°github page",
      "content_html": "<h4 id=\"%E6%B5%81%E7%A8%8B\">æµç¨‹ <a class=\"direct-link\" href=\"#%E6%B5%81%E7%A8%8B\">#</a></h4>\n<ol>\n<li>\n<p>ä¸‹è½½11ty æ¨¡æ¿ <a href=\"https://github.com/google/eleventy-high-performance-blog\">https://github.com/google/eleventy-high-performance-blog</a>, æŒ‰ç…§æç¤ºæ„å»ºè‡ªå·±çš„æœ¬åœ°åšå®¢</p>\n</li>\n<li>\n<p>æ–°å¢ .nojekyll æ–‡ä»¶, æ­¤æ–‡ä»¶ç”¨æ¥å‘ŠçŸ¥ github-page ä¸ä½¿ç”¨ jekyll ä»¥å…äº§ç”Ÿå†²çª</p>\n</li>\n<li>\n<p>æ–°å¢ä½ è‡ªå·±çš„gitä»“åº“, å‘½åä¸º &lt;username&gt;.github.io</p>\n</li>\n<li>\n<p>åˆ©ç”¨ä¸‹é¢çš„å‘½ä»¤ç”Ÿæˆä¸€å¯¹ç§˜é’¥</p>\n</li>\n</ol>\n<pre class=\"language-shell\"><code class=\"language-shell\">    ssh-keygen -t rsa -b <span class=\"token number\">4096</span> -C <span class=\"token string\">\"<span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">git</span> config user.email<span class=\"token variable\">)</span></span>\"</span> -f gh-pages -N <span class=\"token string\">\"\"</span></code></pre>\n<ul>\n<li>\n<p>å…¬é’¥æ·»åŠ åˆ°åˆšåˆšçš„ä»“åº“ deploy key</p>\n<p><img src=\"http://cdn.glofission.xyz/img/58b01ba0e0ca16a8610e92c1d0d2b661-20210730142442-19f6c1.png\" alt=\"æ·»åŠ å…¬é’¥\"></p>\n</li>\n<li>\n<p>ç§é’¥æ·»åŠ åˆ°åˆšåˆšçš„ä»“åº“ secret</p>\n<p><img src=\"http://cdn.glofission.xyz/img/a99999f7a1731866c320691fcb87e148-20210730142605-2772eb.png\" alt=\"æ·»åŠ ç§é’¥\"></p>\n</li>\n</ul>\n<ol start=\"5\">\n<li>åœ¨æœ¬åœ°é¡¹ç›®æ–°å¢ .github/workflow/build.yml æ–‡ä»¶, æ·»åŠ ä¸‹é¢çš„å†…å®¹, ä¸»è¦é€»è¾‘æ˜¯æ‰“åŒ…é™æ€æ–‡ä»¶, å¹¶è°ƒç”¨é¢„å®šä¹‰çš„github action æŠŠ<br>\nç¼–è¯‘å¥½çš„æ–‡ä»¶æäº¤åˆ°gitä»“åº“</li>\n</ol>\n<pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Eleventy Build<br><br><span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span><br>  <span class=\"token key atrule\">push</span><span class=\"token punctuation\">:</span><br>    <span class=\"token key atrule\">branches</span><span class=\"token punctuation\">:</span><br>      <span class=\"token punctuation\">-</span> master<br><br><span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span><br>  <span class=\"token key atrule\">deploy</span><span class=\"token punctuation\">:</span><br>    <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span>latest<br>    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span><br>        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@v2<br><br>        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Setup Node<br>          <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/setup<span class=\"token punctuation\">-</span>node@v1<br>          <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span><br>            <span class=\"token key atrule\">node-version</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'14.x'</span><br><br>        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> npm ci<br><br>        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> npm run build<br><br>        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Deploy<br>          <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> peaceiris/actions<span class=\"token punctuation\">-</span>gh<span class=\"token punctuation\">-</span>pages@v3<br>          <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span><br>            <span class=\"token key atrule\">deploy_key</span><span class=\"token punctuation\">:</span> $<br>            <span class=\"token key atrule\">publish_dir</span><span class=\"token punctuation\">:</span> ./_site<br></code></pre>\n<blockquote>\n<p>ä¸Šé¢æ–‡ä»¶ä¸­ secrets.ACTIONS_DEPLOY_KEY æ­£å¥½å¯¹åº”äº†æ­¥éª¤4ä¸­é…ç½®å¥½çš„ç§é’¥, è¿™æ ·actionä¸­å¯ä»¥å‘ä»“åº“gh-pageåˆ†æ”¯æäº¤ç¼–è¯‘å¥½çš„æ–‡ä»¶</p>\n</blockquote>\n<ol start=\"6\">\n<li>æœ€åä¸€æ­¥, æŠŠgithub-pageçš„source è®¾ç½®ä¸ºgh-page, è¿™æ ·æ¯æ¬¡å¾€masteråˆ†æ”¯æäº¤å†…å®¹ä¹‹å, å°±å¯ä»¥è§¦å‘ action è‡ªåŠ¨ç¼–è¯‘æ–‡ä»¶pushåˆ°gh-pageåˆ†æ”¯, ä½ å¯ä»¥åœ¨è‡ªå·±çš„ &lt;username&gt;.github.io çœ‹åˆ°æœ€æ–°çš„åšå®¢äº†</li>\n</ol>\n<h4 id=\"%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99\">å‚è€ƒèµ„æ–™ <a class=\"direct-link\" href=\"#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99\">#</a></h4>\n<ul>\n<li><a href=\"https://www.rockyourcode.com/how-to-deploy-eleventy-to-github-pages-with-github-actions/\">https://www.rockyourcode.com/how-to-deploy-eleventy-to-github-pages-with-github-actions/</a></li>\n<li><a href=\"https://www.linkedin.com/pulse/eleventy-github-pages-lea-tortay/\">https://www.linkedin.com/pulse/eleventy-github-pages-lea-tortay/</a></li>\n<li>11tyåŸºæœ¬ç”¨æ³•\n<ul>\n<li><a href=\"https://www.bilibili.com/video/BV1zw41197NL?from=search&amp;seid=4624100872590089830\">https://www.bilibili.com/video/BV1zw41197NL?from=search&amp;seid=4624100872590089830</a></li>\n<li><a href=\"https://www.11ty.dev/\">https://www.11ty.dev/</a></li>\n</ul>\n</li>\n</ul>\n",
      "date_published": "2021-07-31T00:00:00-00:00"
    },{
      "id": "https://skadai.github.io/posts/Starter/",
      "url": "https://skadai.github.io/posts/Starter/",
      "title": "starter",
      "content_html": "<p>å®šé£æ³¢</p>\n<p>è‹è½¼</p>\n<blockquote>\n<p>ä¸‰æœˆä¸ƒæ—¥ï¼Œæ²™æ¹–é“ä¸­é‡é›¨ã€‚é›¨å…·å…ˆå»ï¼ŒåŒè¡Œçš†ç‹¼ç‹ˆï¼Œä½™ç‹¬ä¸è§‰ï¼Œå·²è€Œé‚æ™´ï¼Œæ•…ä½œæ­¤è¯ã€‚</p>\n</blockquote>\n<p>è«å¬ç©¿æ—æ‰“å¶å£°ï¼Œä½•å¦¨åŸå•¸ä¸”å¾è¡Œã€‚</p>\n<p>ç«¹æ–èŠ’é‹è½»èƒœé©¬ï¼Œè°æ€•ï¼Ÿä¸€è“‘çƒŸé›¨ä»»å¹³ç”Ÿã€‚</p>\n<p>æ–™å³­æ˜¥é£å¹é…’é†’ï¼Œå¾®å†·ï¼Œå±±å¤´æ–œç…§å´ç›¸è¿ã€‚</p>\n<p>å›é¦–å‘æ¥è§ç‘Ÿå¤„ï¼Œå½’å»ï¼Œä¹Ÿæ— é£é›¨ä¹Ÿæ— æ™´</p>\n",
      "date_published": "2021-07-30T00:00:00-00:00"
    }
  ]
}
